!function(){function I(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","path");return e.appendChild(i),i.setAttribute("d",t),i.setAttribute("fill","none"),i.setAttribute("stroke","black"),i.setAttribute("stroke-width","2"),i.setAttribute("id","path"),i}function h(t){let{x:e=0,y:i=0,width:s,height:h}=t;return e-=.5*s,i-=.5*h,s<0&&(e+=s,s*=-1),h<0&&(i+=h,h*=-1),{x:e,y:i,width:s,height:h}}function C(t,e,...i){return setTimeout(t,e,...i)}function T(t=0,e=1){return Math.random()*(e-t)+t}function k(t,e){r[t]=r[t]||[],r[t].push(e)}function j(t,...e){(r[t]||[]).map(t=>t(...e))}function a(t,e){return new URL(t,e).href}function s(){window.Aa||(window.Aa={Ma:a,Ka:n,d:l})}function t(t,e,i){if(s(),l[t])return l[t];l[t]=e(...i)}function e(h){return s(),new Promise((t,e)=>{let i,s;if(n[h])return t(n[h]);(i=new Image).onload=()=>{s=a(h,window.location.href),n[s]=n[h]=i,t(i)},i.onerror=()=>{e()},i.src=h})}function L(t){return new M(t)}function N(t){return new S(t)}function o(t=()=>{},e){t.Ba&&e.preventDefault(),t(e)}function x(t){var e=u[t.code],i=c[e];g[e]=!0,o(i,t)}function m(t){var e=u[t.code],i=d[e];g[e]=!1,o(i,t)}function i(t){return[].concat(t).some(t=>g[t])}function D(t,e,{Fa:i="keydown",preventDefault:s=!0}={}){let h="keydown"==i?c:d;e.Ba=s,[].concat(t).map(t=>h[t]=e)}function F(t,{Fa:e="keydown"}={}){let i="keydown"==e?c:d;[].concat(t).map(t=>delete i[t])}function H(t){return new b(t)}function V(e=1){var i=H({create:G,m:241});i.La=function(e){this.o.forEach(t=>{t.dy*=e})},i.ua=function(){this.o.forEach(t=>{t.dy/=2})},i.Na=e;for(let t=0;t<240;t++){var s=T(1,3)*e,h=Math.floor(s/e*50)+50;i.get({x:Math.floor(T(0,256)),y:t,width:1,height:1,dy:s/4,color:`rgb(${h}, ${h}, ${h})`,update(){this.advance(),240<this.y&&(this.y=0)}})}return i.B=()=>!0,i}function $(t){return new E(t)}function y(t,e){var i=[],s=e.x+e.width/2,h=e.y+e.height/2;return e=t.y<h,h=t.y+t.height>=h,t.x<s&&(e&&i.push(0),h)&&i.push(2),t.x+t.width>=s&&(e&&i.push(1),h)&&i.push(3),i}function Y(t){return new R(t)}function X(t){return new O(t)}function z(s,t){s.B()&&t.forEach(t=>{var e,i;(e=(e="enemy"!==s.name||"enemy"!==t.name)&&(t.B()&&!s.j&&!t.j))&&(e=h(t),i=h(s),e=e.x<i.x+i.width&&e.x+e.width>i.x&&e.y<i.y+i.height&&e.y+e.height>i.y),e&&("ship-bullet"!=s.name||t.j||(s.g=0,t.S(1)),"ship"!=s.name||"asteroid"!=t.name&&"boss"!=t.name||(s.F(),s.g=0,t.S(5)),"ship"==s.name&&"enemy"==t.name&&(t.F(),t.g=0,s.S(50)),"ship"==s.name&&"enemy-bullet"==t.name&&(t.g=0,s.S(10)),"ship"!=s.name||"powerup"!=t.name||t.ma||(t.F(),s.Ga(t)))})}function q(t){return new e2(t)}function B(t){t=J[t];var e=Math.max(...Object.keys(t[0]),...Object.keys(t[1])),i=t[0][e];return e+(i??=t[1][e])[1]/1e3*60*i[0]}function w(){D(["esc"],()=>{j("change-scene","menu")}),D(["p"],()=>{j("pause")}),F(["enter"]),Z.play("song1"),Z.Ia(!0);const r=new Q({x:120,y:248}),n=V(20),l=new t2(void 0);D(["enter"],()=>l.Ja());let c=0,d=0,g=0,u=!0,p=!1,f=B(c);const o=H({create:N,m:400}),x=H({create:G,m:40}),m=H({create:G,m:400}),y=H({create:$,m:10}),w=H({create:Y,m:50}),v=H({create:X,m:4}),M=H({create:q,m:4}),S=L({text:"SCORE 00000",x:8,y:8}),b=L({x:224,y:8,text:"@@@",color:"red"}),A=L({x:128,y:120,text:"LEVEL 1",align:"center",color:"lightgreen"}),t=new P({x:192,y:8,width:24,height:8,anchor:{x:0,y:0},v(){var t=this.context,e=0<=r.h?r.h/5:0;t.strokeStyle="white",t.lineWidth=2,t.strokeRect(0,0,this.width,this.height),t.fillStyle="green",r.h<25&&(t.fillStyle="red"),t.fillRect(2,2,e,this.height-4)}}),E=(k("hit",()=>{K(2.3,void 0,330,void 0,.06,.17,2,3.7,void 0,void 0,void 0,void 0,.05,.4,2,.5,.13,.89,.05,.17)}),k("explosion",(e,i,s,h,a)=>{K(void 0,void 0,45,.03,.21,.6,4,.9,2,-3,void 0,void 0,void 0,.2,void 0,.9,void 0,.45,.26);for(let t=0;t<s;t++)0==t%2&&o.get({x:e,y:i,dx:T(-1,1)/2,dy:T(-1,1)/2,color:null,g:30}),o.get({x:e,y:i,dx:T(-h/2,h/2),dy:T(-h/2,h/2),color:a,g:30*h})}),k("ship-fire",(t,e,i)=>{K(.9,void 0,413,void 0,.05,.01,1,3.8,-3,-13.4,void 0,void 0,void 0,void 0,void 0,void 0,.11,.65,.07,void 0,237),x.get({name:"ship-bullet",x:t,y:e,width:2,height:4,dy:-4,dx:i,color:null,l:17,g:100,update(){this.advance(),this.y<0&&(this.g=0)}})}),k("enemy-fire",(t,e)=>{K(.9,void 0,413,void 0,.05,.01,1,3.8,-3,-13.4,void 0,void 0,void 0,void 0,void 0,void 0,.11,.65,.07,void 0,237);var i=r.x-4-t,s=r.y-4-e,h=+Math.hypot(i,s);m.get({name:"enemy-bullet",x:t+4,y:e+4,dx:i/h,dy:s/h,width:2,height:2,color:"red",g:200})}),k("boss-fire",(e,i)=>{K(.9,void 0,413,void 0,.05,.01,1,3.8,-3,-13.4,void 0,void 0,void 0,void 0,void 0,void 0,.11,.65,.07,void 0,237);for(let t=0;t<12;t++)m.get({name:"enemy-bullet",x:e,y:i,dx:+Math.cos(30*t*Math.PI/180),dy:+Math.sin(30*t*Math.PI/180),width:2,height:2,color:"red",g:400})}),k("score",t=>{r.J+=t}),k("spawn-boss",(t,e,i,s,h,a,o,r,n,l)=>{p=!1,j("spawn-enemy",a,0,{l:o,h:2,V:l,Ea:r,parent:t=v.get({l:t,h:e,V:i,rotate:!1,loop:!0,j:!0,Z:"pink",ta:n,sa:h,path:I(s)}),path:null})}),k("spawn-enemy",(e,i,s)=>{const h=1<(d+1)/(c+1)?Math.floor((d+1)/(c+1)*s.h*.2):0;for(let t=0;t<e;t++)C(t=>{w.get({...s,ra:t*Math.PI/180,h:s.h+h})},t*i,360/e*t)}),k("spawn-asteroid",(e,i,s,h,a)=>{const o=1<(d+1)/(c+1)?Math.floor((d+1)/(c+1)*2):0;let r=0;for(let t=0;t<e;t++)r>s.length-1&&(r=0),C((t,e)=>{y.get({x:s[e],y:-8,dx:h[e],dy:a[e],h:10+o})},t*i,t,r),r++}),k("spawn-powerup",(t,e,i)=>{M.get({type:t,x:e,y:-8,dy:i})}),k("set-dialog",(t,e)=>{l.start({D:e,ca:t})}),k("next-level",t=>{c=t,d++,g=0,u=!1,f=B(t)}),k("boss-die",()=>{j("score",200),j("next-level",c=++c>=i2?0:c)}),k("game-over",()=>{var t=localStorage.getItem("hiScore")||0;r.J>t&&localStorage.setItem("hiScore",r.J),j("change-scene","game-over",{J:r.J,Ha:t})}),new U(void 0)),R=new U(void 0),O=new U(void 0);return new W({children:[n,S,b,x,m,r,w,v,y,M,o,t,l,A],wa:!1,update(){var t,e,i,s,h,a,o;this.paused=!1,l.ia&&l.ca?(l.update(),this.paused=!0):(g<40&&(A.text="LEVEL "+(d+1),A.g=100),t=w.size+y.size,g===f&&(p=!0),[t=0,e=0,i,s=!1]=[g,c,t,p],a=J[e],o=B(e),a[0][t]&&j("spawn-enemy",(h=a[0][t])[0],h[1],{l:h[2],rotate:h[3],loop:h[4],h:h[5],Ea:h[6],V:h[7],path:I(h[8])}),a[1][t]&&j("spawn-asteroid",...a[1][t]),a[2][t]&&j("spawn-powerup",...a[2][t]),a[3][t]&&j("set-dialog",...a[3][t]),0===a[4].length&&o<=t&&0===i&&j("next-level",e+1>=i2?0:e+1),0<a[4].length&&s&&0===i&&j("spawn-boss",...a[4]),r.ja<=0&&!this.wa?(this.wa=!0,C(()=>j("game-over"),1e3)):(x.A().forEach(t=>{E.clear(),E.add(t,y.A(),w.A(),v.A()),z(t,E.get(t))}),R.clear(),R.add(r,y.A(),w.A(),m.A(),v.A(),M.A()),z(r,R.get(r)),O.clear(),O.add(y.A()),y.A().forEach(t=>{z(t,O.get(t))}),S.text="SCORE "+r.J,b.text="@@@".slice(0,r.ja),u&&40<g&&g<140&&0==g%20&&n.ua(),g++))}})}function v(){D(["enter"],()=>{j("change-scene","game")}),F(["esc"]);const t=V(20),e=L({x:128,y:32,text:"MICRO SHOOTER",align:"center",color:"red",s:2,H:4}),i=L({x:128,y:88,text:"JS13K 2024 EDITION",align:"center",color:"yellow"}),s=L({x:128,y:128,text:"A GAME BY\nMARCO FERNANDES",lineHeight:16,color:"white",align:"center"}),h=L({x:128,y:176,text:"ARROWS OR WASD TO MOVE\nSPACE TO SHOOT",lineHeight:16,align:"center"}),a=L({x:128,y:224,text:"ENTER TO START",color:"lightgreen",align:"center"}),o=new W({frame:0,children:[t,a],update(){40<this.frame&&this.frame<140&&0==this.frame%20&&t.ua(),this.frame++}});return C(()=>{o.add(e)},1e3),C(()=>{o.add(i)},2e3),C(()=>{o.add(s)},3e3),C(()=>{o.add(h)},4e3),o}let r={},n={},l={};class P{constructor(t){this.i(t)}i(t={}){Object.assign(this,{name:"",x:0,y:0,width:8,height:8,rotation:0,s:1,H:1,anchor:{x:0,y:0},color:"white",dx:0,dy:0,U:0,R:0,g:1/0,frame:0,l:0,context:window.T.context,u:[n["spritesheet.png"],8,8],h:20,W:!1,M:t.update,ha:t.C,qa:t.v,...t})}S(t){j("hit"),this.h-=t,this.W=!0,this.h<=0&&this.F&&this.F(),C(()=>this.W=!1,100)}advance(){this.x+=this.dx,this.y+=this.dy,this.dx+=this.U,this.dy+=this.R,this.g--,this.frame++}update(){this.M?this.M():this.advance()}C(){if(this.ha)return this.ha();var t=this.context,e=this.x,i=this.y,s=this.anchor,h=this.rotation,a=this.s,o=this.H,r=this.width,n=this.height;t.save(),t.translate(e,i),h&&t.rotate(h),a&&o&&t.scale(a,o),t.translate(-r*s.x,-n*s.y),this.v(),t.restore()}v(){if(this.qa)return this.qa();var t=this.context,e=this.color,i=this.width,s=this.height;this.W&&(t.save(),t.translate(0,-1)),this.color?(t.fillStyle=e,t.fillRect(0,0,i,s)):t.drawImage(this.u[0],this.l*this.u[1],0,i,s,0,0,i,s),this.W&&(t.globalCompositeOperation="source-atop",t.fillStyle="white",t.fillRect(0,0,i,s),t.globalCompositeOperation="source-over",t.restore())}B(){return 0<this.g}}const G=t=>new P(t);class W{constructor(t){this.i(t)}i(i={}){var t=Object.keys(i).reduce((t,e)=>("function"!=typeof i[e]&&(t[e]=i[e]),t),{});Object.assign(this,{id:"scene",context:window.T.context,M:i.update,ha:i.C,children:[],paused:!1,...t})}add(t){this.children.push(t)}pause(){this.paused=!0}resume(){this.paused=!1}update(e){this.paused||(this.children.forEach(t=>{if(!t.B)return t.update(e);t.B()&&t.update(e)}),this.M&&this.M())}C(){this.context.save(),this.M&&this.M(),this.children.forEach(t=>{if(!t.B)return t.C();t.B()&&t.C()}),this.context.restore()}}class M extends P{constructor(t={}){super({name:"text",x:0,y:0,text:"",color:"white",align:"left",lineHeight:8,scale:1,u:n["font.png"],...t})}v(){const t=this.text.split("\n"),h=this.context,e=this.align,a=this.lineHeight,o=this.color;h.save(),t.forEach(i=>{h.save(),"center"===e&&h.translate(8*-i.length/2,0),"right"===e&&h.translate(8*-i.length,0);for(let e=0;e<i.length;e++){var s=i.charCodeAt(e);let t=64===s?41:58===s?40:33===s?39:63===s?38:44===s?37:46===s?36:32===s?-1:48<=s&&s<=57?s-22:65<=s&&s<=90?s-65:0;-1!==t&&(s=8*e,h.drawImage(this.u,8*t,0,8,8,s,0,8,8),h.globalCompositeOperation="source-atop",h.fillStyle=o||"white",h.fillRect(s,0,8,8),h.globalCompositeOperation="source-over")}h.restore(),h.translate(0,a)}),h.restore()}}class S extends P{constructor(t){super({name:"explosion-particle",color:"white",anchor:{x:.5,y:.5},...t})}update(){!this.color&&this.g<30&&(this.s=this.H=this.g/30),this.color&&this.g<60&&(this.s=this.H=this.g/60),this.advance()}v(){this.color||this.context.drawImage(this.u[0],128,0,8,8,0,0,8,8),this.color&&(this.context.fillStyle=this.color,this.context.fillRect(0,0,1,1))}}let c={},d={},g={},u={Enter:"enter",Escape:"esc",Space:"space",ArrowLeft:"arrowleft",ArrowUp:"arrowup",ArrowRight:"arrowright",ArrowDown:"arrowdown"};class Q extends P{i(t){super.i({name:"ship",da:!0,y:248,j:!1,Da:!1,h:100,ja:3,J:0,N:0,G:!1,anchor:{x:.5,y:.5},l:1,...t}),this.ya()}Ga(t){"shield"===t.type&&(this.h+=50,100<this.h)&&(this.h=100),"fire"===t.type&&(this.N++,3<this.N)&&(this.N=3)}$(){this.G||(this.G=!0,j("ship-fire",this.x-1,this.y-8,T(-.3,.3)),0<this.N&&j("ship-fire",this.x-1,this.y-8,T(-.5,.5)),1<this.N&&C(()=>{j("ship-fire",this.x-1,this.y-8,T(-.3,.3)),j("ship-fire",this.x-1,this.y-8,T(-.5,.5))},100),2<this.N&&C(()=>{j("ship-fire",this.x-1,this.y-8,-2),j("ship-fire",this.x-1,this.y-8,2)},400),C(()=>{this.G=!1},200))}F(){j("explosion",this.x,this.y-4,60,4,"white"),this.Da=!0,this.g=0,this.ja--,this.j=!0,this.U=this.dx=0,this.x=128,C(()=>{this.ya()},1e3)}ya(){this.da=this.j=!0,this.g=1/0,this.y=248,this.frame=0,this.h=100,this.N=0,C(()=>{this.j=this.da=!1},1e3)}update(){this.R=this.U=0,this.dx*=.96,this.dy*=.96,this.l=1,i(["d","arrowright"])&&this.dx<5&&(this.U=.2,this.l=2),i(["a","arrowleft"])&&-5<this.dx&&(this.U=-.2,this.l=0),this.da||(i(["s","arrowdown"])&&this.dy<5&&(this.R=.2),i(["w","arrowup"])&&-5<this.dy&&(this.R=-.2)),!this.G&&i("space")&&this.$(),this.da&&(this.R=-.03,this.s=this.H=Math.min(Math.max(1,2-this.frame/60),2)),this.h<=0&&this.F(),this.advance(),this.x<4&&(this.x=4,this.dx=0),252<this.x&&(this.x=252,this.dx=0),this.y<4&&(this.y=4,this.dy=0),236<this.y&&(this.y=236,this.dy=0)}v(){var t=this.context,e=this.width,i=this.height;t.drawImage(this.u[0],this.u[1]*this.l,0,e,i,0,0,e,i);let s=1;this.R<0&&(s=this.frame%10<5?2:3),t.fillStyle="#FFaa33",t.fillRect(3,7,2,s),t.fillStyle="#FF6633",t.fillRect(this.frame%10<5?3:4,7+s,1,s),this.W&&(t.globalCompositeOperation="source-atop",t.fillStyle="white",t.fillRect(0,0,e,i),t.globalCompositeOperation="source-over")}}class b{constructor({create:t,m:e=1024}={}){let i;if(!(t&&(i=t({id:""}))&&i.update&&i.i&&i.B&&i.C))throw Error("Must provide create() function which returns an object with init(), update(), render(), and isAlive() functions");this.pa=t,this.o=[t({id:""})],this.size=0,this.m=e}get(t={}){if(this.size==this.o.length){if(this.size==this.m)return;for(var e=0;e<this.size&&this.o.length<this.m;e++)this.o.push(this.pa())}return e=this.o[this.size],this.size++,e.i(t),e}A(){return this.o.slice(0,this.size)}clear(){this.size=this.o.length=0,this.o.push(this.pa())}update(e){let i,s=!1;for(let t=this.size;t--;)(i=this.o[t]).update(e),i.B()||(s=!0,this.size--);s&&this.o.sort((t,e)=>e.B()-t.B())}C(){for(let t=this.size;t--;)this.o[t].C()}}const K=(...t)=>A(_(...t)),A=(...t)=>{let e=p.createBufferSource(),i=p.createBuffer(t.length,t[0].length,44100);return t.map((t,e)=>i.getChannelData(e).set(t)),e.buffer=i,e.connect(p.destination),e.start(),e},_=(t=1,e=.05,i=220,s=0,h=0,a=.1,o=0,r=1,n=0,l=0,c=0,d=0,g=0,u=0,p=0,f=0,x=0,m=1,y=0,w=0)=>{var v=2*Math.PI,M=n*=500*v/194481e4,S=(0<p?1:-1)*v/4;e=i*=(1+2*e*Math.random()-e)*v/44100;let b=[],A=0,E=0,R=0,O=1,I=0,C=0,T=0,k,j;for(l*=500*v/44100**3,p*=v/44100,c*=v/44100,d*=44100,g=44100*g|0,j=(s=99+44100*s)+(y*=44100)+(h*=44100)+(a*=44100)+(x*=44100)|0;R<j;b[R++]=T)++C%(100*f|0)||(T=o?1<o?2<o?3<o?Math.sin((A%v)**3):Math.max(Math.min(Math.tan(A),1),-1):1-(2*A/v%2+2)%2:1-4*Math.abs(Math.round(A/v)-A/v):Math.sin(A),T=(g?1-w+w*Math.sin(2*Math.PI*R/g):1)*(0<T?1:-1)*Math.abs(T)**r*t*.3*(R<s?R/s:R<s+y?1-(R-s)/y*(1-m):R<s+y+h?m:R<j-x?(j-R-x)/a*m:0),T=x?T/2+(x>R?0:(R<j-x?1:(j-R)/x)*b[R-x|0]/2):T),k=(i+=n+=l)*Math.sin(E*p-S),A+=k-k*u*(1-1e9*(Math.sin(R)+1)%2),E+=k-k*u*(1-1e9*(Math.sin(R)**2+1)%2),O&&++O>d&&(i+=c,e+=c,O=0),!g||++I%g||(i=e,n=M,O=O||1);return b},p=new(window.AudioContext||webkitAudioContext);class E extends P{i(t){super.i({name:"asteroid",u:[n["spritesheet16.png"],16,16],l:2,width:16,height:16,color:null,anchor:{x:.5,y:.5},h:10,...t})}F(){j("explosion",this.x,this.y,50,4,"white"),j("score",10),this.g=0}update(){this.rotation=this.frame/(10/this.dy),this.advance(),this.x<0||264<this.x||248<this.y&&(this.g=0)}}class U{constructor({aa:t=3,ba:e=25,I:i}={}){this.aa=t,this.ba=e,t=window.T.context.canvas,this.I=i||{x:0,y:0,width:t.width,height:t.height},this.Y=!1,this.ga=0,this.P=[],this.L=[]}clear(){this.L.map(t=>{t.clear()}),this.Y=!1,this.P.length=0}get(e){let i=new Set;return this.L.length&&this.Y?(y(e,this.I).map(t=>{this.L[t].get(e).map(t=>i.add(t))}),Array.from(i)):this.P.filter(t=>t!==e)}add(...t){t.flat().map(t=>{this.Y?this.oa(t):(this.P.push(t),this.P.length>this.ba&&this.ga<this.aa&&(this.Ca(),this.P.map(t=>this.oa(t)),this.P.length=0))})}oa(e){y(e,this.I).map(t=>{this.L[t].add(e)})}Ca(){if(this.Y=!0,!this.L.length)for(var t=this.I.width/2|0,e=this.I.height/2|0,i=0;i<4;i++)this.L[i]=new U({I:{x:this.I.x+(1==i%2?t:0),y:this.I.y+(2<=i?e:0),width:t,height:e},aa:this.aa,ba:this.ba}),this.L[i].ga=this.ga+1}}class R extends P{i(t){t={name:"enemy",l:3,color:null,anchor:{x:.5,y:.5},h:1,frame:0,loop:!0,va:!0,Z:"white",V:200,...t},super.i(t),this.path&&(this.g=Math.floor(t.path.getTotalLength())),this.loop&&(this.g=1/0)}$(){j("enemy-fire",this.x-4,this.y-4,this.rotation,3)}F(){j("explosion",this.x,this.y,30,3,this.Z),j("score",10),this.g=0}update(){var t,e;this.rotation=180*Math.PI/180,this.path?(t=this.path.getPointAtLength(this.frame),e=this.path.getPointAtLength(this.frame+1),this.x=Math.floor(t.x),this.y=Math.floor(t.y),this.rotate&&(this.rotation=90*Math.PI/180+Math.atan2(e.y-t.y,e.x-t.x))):(this.x=this.parent.x+Math.cos(this.frame/this.parent.ta+this.ra)*this.parent.sa,this.y=this.parent.y+Math.sin(this.frame/this.parent.ta+this.ra)*this.parent.sa),this.va&&(this.s=this.H=Math.min(Math.max(0,(this.frame+1)/100),1)),!this.loop&&this.g<100&&(this.s=this.H=Math.min(Math.max(0,this.g/100),1)),this.s<1&&(this.j=!0),1<=this.s&&(this.j=!1),1==this.s&&0==this.frame%this.V&&this.$(),this.path&&this.frame>=this.path.getTotalLength()&&this.loop&&(this.frame=0,this.va=!1),this.frame++,this.g--}}class O extends R{i(t){super.i({name:"boss",u:[n["spritesheet16.png"],16,16],l:0,width:16,height:16,color:null,h:10,Z:"white",V:200,G:!1,loop:!1,j:!0,ka:!1,fa:[],...t}),this.xa=this.h}S(t){super.S(t),this.ka=!0,C(()=>{this.ka=!1},1e3)}$(){this.G=!0,this.j=!1,this.fa[0]=C(()=>{j("boss-fire",this.x,this.y,this.rotation,3)},400),this.fa[1]=C(()=>{j("boss-fire",this.x,this.y,this.rotation,3)},800),this.fa[2]=C(()=>{j("boss-fire",this.x,this.y,this.rotation,3)},1200),C(()=>{this.G=!1,this.j=!0},1600)}F(){j("explosion",this.x,this.y,30,3,this.Z),j("score",10),this.g=0,this.fa.map(t=>clearTimeout(t)),j("boss-die")}update(){this.G||super.update(),this.G||(this.j=!0)}v(){var t,e;super.v(),this.ka&&(t=this.context,e=20*this.h/this.xa,t.save(),t.translate(this.width/2,this.height/2),t.rotate(-this.rotation),t.fillStyle="white",t.fillRect(-12,-16,24,6),t.fillStyle="black",t.fillRect(-11,-15,22,4),t.fillStyle="green",this.h<this.xa/4&&(t.fillStyle="red"),t.fillRect(-10,-14,e,2),t.restore())}}class t2 extends P{i(t){t={name:"dialog",x:-16,y:200,za:[10,11,12,13,14],text:L({text:"",x:16,y:8,align:"left"}),K:0,D:[],O:0,ea:0,frame:0,anchor:{x:0,y:0},na:!1,ia:!1,la:!1,ca:!0,...t},super.i(t)}Ja(){0==this.D.length||this.O>this.D.length||(this.K=this.D[this.O].length)}start(t){this.la=!1,setTimeout(()=>{this.ia=!0,this.D=["",...t.D],this.frame=0,this.ca=t.ca},1e3),this.dx=2}stop(){this.la=!0,this.text.text="        ",this.ia=!1,setTimeout(()=>{this.D=[],this.frame=this.K=this.O=0},1e3),this.dx=-2}update(){var t;8<this.x&&(this.dx=0,this.x=8),this.y<-16&&(this.dx=0,this.x=-16),0!=this.D.length&&(this.na=!1," "!==(t=this.D[this.O]+"      ")[this.K]&&(this.na=!0),0==this.frame%5&&(this.K++," "!==t[this.K])&&K(1.5,void 0,261,.01,.02,.08,1,1.5,-.5,void 0,void 0,-.5,void 0,void 0,void 0,void 0,.9,.05),this.O<this.D.length&&(this.text.text=t.slice(0,this.K)),this.frame++,this.K>=t.length&&(this.O++,this.K=this.frame=0),this.O>=this.D.length&&!this.la&&this.stop(),this.na&&0==this.frame%5&&this.ea++,this.ea>=this.za.length&&(this.ea=0),super.update())}v(){var t=this.context,e=this.u;t.fillStyle="white",t.fillRect(-2,-2,12,12),t.drawImage(e[0],8*this.za[this.ea],0,8,8,0,0,8,8),t.translate(16,0),this.text.v()}}class e2 extends P{i(t){super.i({name:"powerup",type:"fire",width:16,height:16,ma:!1,g:600,anchor:{x:.5,y:.5},u:[n["font.png"],8,8],...t})}F(){this.ma=!0,this.g=10,this.frame=0,K(1.5,void 0,1e3,void 0,.1,.1,1,1.5,void 0,void 0,void 0,void 0,void 0,void 0,void 0,.1,.5,.1)}v(){var t=this.context,e=this.type,i=this.ma,s=this.frame;let h,a;"shield"===e&&(h="yellow",a=18),"fire"===e&&(h="lightblue",a=15),t.strokeStyle=h,t.lineWidth=2,s%20<10&&!i&&t.strokeRect(0,0,16,16),t.fillStyle=h,t.fillRect(3,3,10,10),t.drawImage(this.u[0],8*a,0,8,8,4,4,8,8),i&&(t.globalAlpha=1-this.frame/10,t.strokeRect(-this.frame,-this.frame,16+2*this.frame,16+2*this.frame),t.globalAlpha=1)}}const J=[[{500:[1,1e3,6,!1,!1,1,0,130,"M287 13-21 61l293 46-293 31 293 48-290 52"]},{},{500:["fire",128,.6]},{500:[!1,["A FULL WAVE IS IMINENT","    "]]},[0,10,250,"M127 120V43c0-77 99 8 99 77 0 70-35 102-99 102S22 181 22 120s32-84 84-84 85 32 85 84c0 53-28 62-64 62-35 0-68-18-68-62 0-43 25-47 47-47 21 0 48 24 48 47 0 24-7 28-27 28s0-14 0-28Z",30,8,3,0,30,250]],[{2e3:[3,1e3,3,!0,!1,1,0,200,"M223-33v238c0 42-61 41-61 0V41c0-44-64-44-64 0v164c0 43-71 33-71 0V-27"],1e3:[5,1500,6,!1,!1,1,0,130,"M287 13-21 61l293 46-293 31 293 48-290 52"]},{},{500:["fire",128,.6],550:["shield",140,.3]},{},[0,10,200,"M127 120V43c0-77 99 8 99 77 0 70-35 102-99 102S22 181 22 120s32-84 84-84 85 32 85 84c0 53-28 62-64 62-35 0-68-18-68-62 0-43 25-47 47-47 21 0 48 24 48 47 0 24-7 28-27 28s0-14 0-28Z",40,32,9,1,60,250]],[{2e3:[3,1e3,3,!0,!1,1,0,200,"M223-33v238c0 42-61 41-61 0V41c0-44-64-44-64 0v164c0 43-71 33-71 0V-27"],1e3:[5,1500,6,!1,!1,1,0,130,"M287 13-21 61l293 46-293 31 293 48-290 52"],3e3:[5,1500,8,!0,!1,1,0,130,"M287 13-21 61l293 46-293 31 293 48-290 52"],4e3:[5,1500,6,!1,!1,1,0,130,"M287 13-21 61l293 46-293 31 293 48-290 52"],5e3:[5,1500,6,!1,!1,1,0,130,"M287 13-21 61l293 46-293 31 293 48-290 52"]},{2e3:[20,1e3,[20,200,120,180,60,220,180,40,120,60],[.1,-.1,0,-.1,.1,-.1,0,.1,0,.1],[1,.5,.7,.5,.9,.5,1,.8,.4,.7]]},{1500:["fire",128,.6],2500:["shield",140,.3],3500:["fire",128,.6],4500:["shield",140,.3]},{500:[!1,["A FULL WAVE IS IMINENT","    "]]},[0,10,200,"M127 120V43c0-77 99 8 99 77 0 70-35 102-99 102S22 181 22 120s32-84 84-84 85 32 85 84c0 53-28 62-64 62-35 0-68-18-68-62 0-43 25-47 47-47 21 0 48 24 48 47 0 24-7 28-27 28s0-14 0-28Z",40,32,9,1,60,250]]],i2=J.length,Z={X:null,play(t){this.X=A(...l[t])},stop(){this.X&&this.X.stop()},Ia(t){this.X&&(this.X.loop=t)}};var s2=zzfxM=(i,s,h,t=125)=>{let a,o,r,n,l,c,d,g,u,p,f,x,m,y,w=0,v=[],M=[],S=[],b=0,A=0,E=1,R={},O=44100/t*60>>2;for(;E;b++)v=[E=g=x=0],h.map((t,e)=>{for(d=s[t][b]||[0,0,0],E|=!!s[t][b],y=x+(s[t][0].length-2-!g)*O,m=e==h.length-1,o=2,n=x;o<d.length+m;g=++o){for(l=d[o],u=o==d.length+m-1&&m||p!=(d[0]||0)|l|0,r=0;r<O&&g;r++>O-99&&u&&(f+=(f<1)/99))c=(1-f)*v[w++]/2||0,M[n]=(M[n]||0)-c*A+c,S[n]=(S[n++]||0)+c*A+c;l&&(f=l%1,A=d[1]||0,l|=0)&&(v=R[[p=d[w=0]||0,l]]=R[[p,l]]||((a=[...i[p]])[2]*=2**((l-12)/12),0<l?_(...a):[]))}x=y});return[M,S]},h2=[[[,0,77,,,.7,2,.41,,,,,,,,.06],[,0,43,.01,,.3,2,,,,,,,,,.02,.01],[,0,170,.003,,.008,,.97,-35,53,,,,,,.1],[.8,0,270,,,.12,3,1.65,-2,,,,,4.5,,.02],[,0,86,,,,,.7,,,,.5,,6.7,1,.05],[,0,41,,.05,.4,2,0,,,9,.01,,,,.08,.02],[,0,2200,,,.04,3,2,,,800,.02,,4.8,,.01,.1],[.3,0,16,,,.3,3]],[[[1,-1,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33],[3,1,22,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,24,,,,,,,,,,,,,,,,,,,,,,,,22,,22,,22,,,,],[5,-1,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,23,,,,,,,,,,,,,,,,,,,,,,,,24,,23,,21,,,,],[,1,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,23,,,,,,,,,,,,,,,,,,,,,,,,24,,23,,21,,,,]],[[1,-1,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33],[3,1,24,,,,,,,,27,,,,,,,,,,,,,,,,27,,,,24,,,,24,,,,,,,,27,,,,,,,,,,,,,,,,24,,24,,24,,,,],[5,-1,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,23,,,,,,,,,,,,,,,,,,,,,,,,24,,23,,21,,,,],[,1,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,23,,,,,,,,,,,,,,,,,,,,,,,,24,,23,,21,,,,],[6,1,,,34,34,34,,,,,,34,34,,,,,34,,,,34,34,,,,,34,,,,34,,,,34,34,34,,,,,,34,,,,,,34,34,,,34,34,,,,,,,,,34,34],[4,1,,,,,,,24,,,,,,24,,24,,,,24,,,,24,,,,,,,,,,,,,,,,24,,,,,,24,,24,,,,24,,,,24,,,,,,,,,,]],[[1,-1,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,23,23,35,23,23,36,23,23,35,23,23,36,23,23,35,35,23,23,35,23,23,35,23,23,36,23,23,35,23,23,36,36],[5,-1,21,,,19,,,21,,,,,,,,,,21,,,19,,,17,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[3,1,24,,,24,,,24,,,,,,,,,,24,,,24,,,24,,,,24.75,24.5,24.26,24.01,24.01,24.01,,,,,25,,,,,,,,25,,,,,,,,25,,,,,,,,25,25,25,25],[4,-1,,,,,,,,,,,,,,,,,,,,,,,,,,,24.75,24.5,24.26,24.01,24.01,24.01,24.01,24,,24,24,,24,24,24,24,,24,24,,24,,24,24,,24,24,,24,24,24,24,,24,24,,24,24],[7,-1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,23,,21,23,,35,,23,,21,23,,35,,35,,23,,21,23,,35,,21,23,,35,,21,23,,,],[6,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,34,36,34,,33,34,34,36,31,36,34,,31,34,32,,33,36,34,,31,34,34,36,33,36,33,,31,,,]],[[1,-1,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,17,17,29,17,17,29,17,17,29,17,17,29,17,17,29,29,17,17,29,17,17,29,17,17,29,17,17,29,17,17,29,29],[4,1,24,24,,24,24,,24,24,24,24,,24,24,,24,,24,24,,24,24,,24,24,24,24,,24,24,,24,24,24,24,,24,24,,24,24,24,,,24,24,,24,,24,24,,24,24,,24,24,24,24,,24,24,,24,24],[7,-1,21,,19,21,,33,,21,,19,21,,33,,33,,21,,19,21,,33,,21,,19,21,,33,,33,,17,,17,17,29,17,17,29,17,,17,17,29,17,17,29,17,,17,17,29,17,17,29,17,,17,17,29,17,17,29],[2,1,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,,,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,,,],[6,1,,,36,,,,,,36,,36,,,,,,,,36,,,,,,36,,36,,,,,,,,36,,,,,,,,,,,,,,,,36,,,,,,36,,36,,,,,,],[3,1,,,,,25,,,,,,,,25,,,,,,,,25,,,,,,,,25,25,25,25,,,,,25,,,,,25,,,25,,,,,,,,25,,,,,,,,25,25,25,25]],[[1,-1,14,14,26,14,14,26,14,14,26,14,14,26,14,14,26,26,14,14,26,14,14,26,14,14,26,14,14,26,14,14,26,26,17,17,29,17,17,29,17,17,29,17,17,29,17,17,29,29,19,19,31,19,19,31,19,19,31,19,19,31,19,19,31,31],[4,1,24,24,,24,24,,24,24,24,24,,24,24,,24,,24,24,,24,24,,24,24,24,24,,24,24,,24,24,24,24,,24,24,,24,24,24,24,,24,24,,36,,24,24,,24,24,,24,24,24,24,,24,24,,24,24],[7,-1,14,,14,14,26,14,14,26,14,,14,14,26,14,14,26,14,,14,14,26,14,14,26,14,,14,14,26,14,14,26,17,,17,17,29,17,17,29,17,,17,17,29,17,17,29,19,,19,19,31,19,19,31,19,,19,19,31,19,19,31],[2,1,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,,,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,,,],[3,1,,,,,25,,,,,,,,25,,,,,,,,25,,,,,,,,25,25,25,25,,,,,25,,,,,,,,25,,,,,,,,25,,,,,,,,25,25,25,25],[6,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,34,,,,,,34,,34,,,,,,,,34,,,,,,34,,34,,,,,,]]],[0,1,1,2,3,4,4]],a2=[[[.4,0,1e4,,,,,,,,,,.01,6.8,-.2],[1.4,0,84,,,,,.7,,,,.5,,6.7,1,.01],[,0,60,,.1,,2],[2,0,360,,,.12,2,2,,,,,,9,,.1],[.75,0,586,,,.25,6],[2,0,360,,,.375,2,3.5],[1.2,0,490,,.25,.45,,,,,,,.2,,,,,,,.1],[.75,0,386,,,.25,6]],[[[,-1,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,],[2,-1,,20,8,8,20,8,,8,,20,,8,20,8,,20,,20,8,8,20,8,,8,,20,,8,20,8,,8,,20,8,8,20,8,,8,,20,,8,20,8,,8,,20,8,8,20,8,,8,,20,,8,20,8,,20],[,1,32,22,22,32,32,22,32,27,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,27,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,27,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,,20,,,20,,,20,20.5,20,,,20,,,20,,20,,,20,,,20,20.5,20,,,20,,,20,,20,,,20,,,20,20.5,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[4,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24.75,20.75,,,,,,,24.75,20.75,,,,21.75,20.75,,24.75,20.75,,,,,,,24.75,20.75,,,,21.75,20.75]],[[,-1,8,,,,,,8,,8,,,,,,8,,6,,,,,,6,,6,,,,,,6,,13,,,,,,13,,13,,,,,,13,,8,,,,,,8,,8,,,,,,8,,],[2,-1,,20,8,8,20,8,,8,,20,,8,20,8,,20,,18,6,6,18,6,,18,,18,,6,18,6,,6,,25,13,13,25,13,,13,,25,13.75,13,25,13,,25,,20,8,8,20,8,,8,,20,,8,20,8,,20],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[5,1,20,20,15,,18,,13,15,,11,,6,8,,18,20,11,11,13,,10,,13,18,23,23,22,,18,,13,,11,11,13,,25,,11,13,25,25,11,,13,,6,,8,,,,,,,,,,,,,,,,]],[[,-1,6,,,,,,6,,6,,,,,,6,,11,,,,,,11,,11,,,,,,11,,13,,,,,,13,,13,,,,,,13,,8,,,,,,8,,8,,,,,,8,,],[2,-1,,18,6,6,18,6,,6,,18,,6,18,6,,6,,23,11,11,23,11,,23,,23,,11,23,11,,11,,25,13,13,25,13,,13,,25,13.75,13,25,13,,25,,20,8,8,20,8,,8,,20,,8,20,8,,20],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[5,1,18,18,13,,11,,10,11,,11,,13,10,,11,13,23,23,22,,18,,13,,11,10,,18,11,,11,18,11,11,13,,25,,18,23,25,23,18,,23,23,18,,20,,20,18,11,,6,8,,,,,,,,,]],[[,-1,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,],[2,-1,,20,8,8,20,8,,8,,20,,8,20,8,,20,,20,8,8,20,8,,8,,20,,8,20,8,,8],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.5,20,,,20,,,20,,20,,,20,,,20,20.5],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,]],[[,-1,11,,,,,,11,,11,,,,,,11,,11,,,,,,11,,11,,,,,,11,,16,,,,,,16,,16,,,,,,16,,16,,,,,,16,,16,,,,,,16,,],[2,-1,,23,11,11,23,11,,11,,23,,11,23,11,,23,,23,11,11,23,11,,11,,23,,11,23,11,,11,,28,16,16,28,16,,16,,28,,16,28,16,,16,,28,16,16,28,16,,16,,28,,16,28,16,,16],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[6,1,15,,,,,,,,,,,,,,,,18,,,,,,,,,,,,15,18,15,18,18,,,,20,,,,,,,,,,,,23,,,,,,,,,,,,20,23,20,23]],[[,-1,13,,,,,,13,,13,,,,,,13,,13,,,,,,13,,13,,,,,,13,,15,,,,,,15,,15,,,,,,15,,15,,,,,,15,,15,,,,,,15,,],[2,-1,,25,13,13,25,13,,25,,25,,13,25,13,,13,,25,13,13,25,13,,25,,25,,13,25,13,,25,,27,15,15,27,15,,27,,27,,15,27,15,,15,,27,15,15,27,15,,27,,27,,15,27,15,,15],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[6,1,25,,,,,,,,,,,,,,,,,,,,,,,,,,,,20,23,25,,27,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,]],[[2,-1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[4,1,3,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,,,,,,,,,],[7,1,,,,,,,,,,,,,,,,,,,,,,,,,18,18,,18,13,13,10,10]],[[,-1,4,,,,,,4,,4,,,,,,4,,4,,,,,,4,,4,,,,,,4,,13,,,,,,13,,13,,,,,,13,,13,,,,,,13,,13,,,,,,13,,],[2,-1,,16,4,4,16,4,,16,,16,,4,16,4,,16,,16,4,4,16,4,,4,,16,,4,16,4,,4,,25,13,13,25,13,,13,,25,,13,25,13,,13,,25,13,13,25,13,,25,,25,,13,25,13,,13],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[6,1,4,,,,,,11,,,,,,16,,,,21,,,,,,20,,,,,,20,,,,11,,,,,,13,,,,,,13,,,,11,,,,,,13,,,13,,,11,11,13,13]],[[,-1,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,6,,,,,,6,,6,,,,,,6,,6,,,,,,6,,6,,,,,,6,,],[2,-1,,20,8,8,20,8,,8,,20,,8,20,8,,20,,20,8,8,20,8,,8,,20,,8,20,8,,8,,18,6,6,18,6,,18,,18,,6,18,6,,18,,18,6,6,18,6,,18,,18,,6,18,6,,18],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[6,1,8,,,,,,18,,,,,,,,,,11,,,,,,22,,,,,,,,,,,,,,18,,,,,,,,,,,,18,18,18,18,18,18,18,18,20,20,20,20,18,18,18,18]],[[,-1,4,,,,,,4,,4,,,,,,4,,4,,,,,,4,,4,,,,,,4,,13,,,,,,13,,13,,,,,,13,,13,,,,,,13,,13,,,,,,13,,],[2,-1,,16,4,4,16,4,,16,,16,,4,16,4,,16,,16,4,4,16,4,,4,,16,,4,16,4,,4,,25,13,13,25,13,,13,,25,,13,25,13,,13,,25,13,13,25,13,,25,,25,,13,25,13,,13],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[6,1,4.25,,,,16,,16,,,,,,,,16,,,,18,,15,,,,13,,11,,,,,,1,,,,16,,16,,,,,,,,21,,,,23,,20,,,,18,,16,,11,,9,,]],[[,-1,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,6,,,,,,6,,6,,,,,,6,,6,,,,,,6,,6,,,,,,6,,],[2,-1,,20,8,8,20,8,,8,,20,,8,20,8,,20,,20,8,8,20,8,,8,,20,,8,20,8,,8,,18,6,6,18,6,,18,,18,,6,18,6,,18,,18,6,6,18,6,,18,,18,,6,18,6,,18],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[6,1,11,,,,,,9,,,,,,8,,,,16,,,,,,15,,,,,,15,,,,6,,,,,,13,,,,,,18,,,,23,22.5,22.5,22.37,22.37,22.5,22.5,22.37,22.37,22.5,22.5,22.37,22.37,22.5,22.5,22.37]],[[,-1,4,,,,,,4,,4,,,,,,4,,4,,,,,,4,,4,,,,,,4,,13,,,,,,13,,13,,,,,,13,,13,,,,,,13,,13,,,,,,13,,],[2,-1,,16,4,4,16,4,,16,,16,,4,16,4,,16,,16,4,4,16,4,,4,,16,,4,16,4,,4,,25,13,13,25,13,,13,,25,,13,25,13,,13,,25,13,13,25,13,,25,,25,,13,25,13,,13],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[6,1,4,,,,,,,,,,,,,,,,,16,16,16,15,16,16,16,15,16,16,16,4,,6,,8,,,,,,,,,,,,,,,,,20,20,20,19,20,20,20,19,20,20,20,8,,9,,]],[[,-1,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,6,,,,,,6,,6,,,,,,6,,6,,,,,,6,,6,,,,,,6,,],[2,-1,,20,8,8,20,8,,8,,20,,8,20,8,,20,,20,8,8,20,8,,8,,20,,8,20,8,,8,,18,6,6,18,6,,18,,18,,6,18,6,,18,,18,6,6,18,6,,18,,18,,6,18,6,,18],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[6,1,20,,,,,,21,,,,,,20,,,,16,,,,15,,11,,,,8,,,,,,6,,,,,,13,,,,,,18,,,,30,,,,,,25,,23,,22,,18,,13,,]],[[,-1,4,,,,,,4,,4,,,,,,4,,4,,,,,,4,,4,,,,,,4,,13,,,,,,13,,13,,,,,,13,,13,,,,,,13,,13,,,,,,13,,],[2,-1,,16,4,4,16,4,,16,,16,,4,16,4,,16,,16,4,4,16,4,,4,,16,,4,16,4,,4,,25,13,13,25,13,,13,,25,,13,25,13,,13,,25,13,13,25,13,,25,,25,,13,25,13,,13],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[6,1,4.25,,3,,4,,11,,16,,,,23,,20,,8,,8.25,,20,,,,21,,,,23,,,,,,,,23,,,,21,,,,20,,8,8,8,1,3,,4,,8,,13,,16,,20,,21,,]],[[,-1,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,6,,,,,,6,,6,,,,,,6,,6,,,,,,6,,6,,,,,,6,,],[2,-1,,20,8,8,20,8,,8,,20,,8,20,8,,20,,20,8,8,20,8,,8,,20,,8,20,8,,8,,18,6,6,18,6,,18,,18,,6,18,6,,18,,18,6,6,18,6,,18,,18,,6,18,6,,18],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[6,1,11,,,,,,,,,,,,,,,,,23,23,23,22,23,21,,20,,15,,11,,8,,6,,,,,,8,,,,,,10,,,,11,,,,,,13,,,,,,16,,,,]],[[4,-1,15,15,15,,15,,15,15,,15,,15,15,,15,15,15,15,15,,15,,15,15,27,15,,15,15,,15,15,15,15,15,,15,,15,15,15,15,15,,15,15,15,,15,,15,15,15,,15,15,,,,,,,,,],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[,-1,,22,22,,,22,,,,22,22,,,22,,,,22,22,,,22,,22,,22,22,,,22,,,,22,22,,,22,,22,,22,22,,,22,,,,22,22,,,22,,22,,22,22,,,22,,,],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,]]],[0,1,2,3,2,4,5,6,1,2,3,7,10,9,8,13,12,11,14,4,5,15,6]],f=(f=document.getElementById("c").getContext("2d"),window.T=window.T||{},window.T.context=f);f.imageSmoothingEnabled=!1,f.setTransform(1,0,0,1,0,0),(async()=>{{let t;for(t=0;t<26;t++)u["Key"+String.fromCharCode(t+65)]=String.fromCharCode(t+97);for(t=0;t<10;t++)u["Digit"+t]=u["Numpad"+t]=""+t;window.addEventListener("keydown",x),window.addEventListener("keyup",m)}await t("song1",s2,h2),await t("song2",s2,a2),await e("font.png"),await e("spritesheet.png"),await e("spritesheet16.png"),k("change-scene",(t,e)=>{var i;switch(i=["change-scene"],r=Object.keys(r).reduce((t,e)=>(i.includes(e)&&(t[e]=r[e]),t),{}),Z.stop(),t){case"game":s=w();break;case"menu":s=v();break;case"game-over":console.log("game-over",e),s=function({J:t=0,Ha:e=localStorage.getItem("hiScore")||0}={}){D(["enter"],()=>{j("change-scene","menu")}),k("explosion",(e,i,s,h,a)=>{K(void 0,void 0,45,.03,.21,.6,4,.9,2,-3,void 0,void 0,void 0,.2,void 0,.9,void 0,.45,.26);for(let t=0;t<s;t++)o.get({x:e,y:i,dx:T(-h/2,h/2),dy:T(-h/2,h/2),color:a,g:30*h})});const i=V(1),o=H({create:N,m:400}),s=L({x:128,y:32,text:"GAME OVER",align:"center",color:"red",s:2,H:4}),h=L({x:128,y:80,text:"YOUR SCORE:",color:"white",align:"center"}),a=L({x:128,y:96,text:""+t,color:"white",align:"center",s:2,H:2}),r=L({x:128,y:128,text:"NEW HIGH SCORE!",color:"yellow",align:"center"}),n=L({x:128,y:224,text:"ENTER TO CONTINUE",color:"lightgreen",align:"center"}),l=new W({frame:0,children:[i,n,o]});return C(()=>{l.add(s),j("explosion",128,48,100,6,"red")},1e3),C(()=>{l.add(h)},2e3),C(()=>{l.add(a)},2500),e<t&&C(()=>{l.add(r),j("explosion",128,132,60,4,"yellow")},3e3),l}(e)}});let s=v();!function({update:t,C:e}){function i(){if(requestAnimationFrame(i),a=performance.now(),o=a-h,h=a,!(1e3<o)){for(s+=o;s>=1e3/60;)t(1/60),s-=1e3/60;r.clearRect(0,0,r.canvas.width,r.canvas.height),e()}}let s=0,h,a,o;const r=window.T.context;return{start(){h=performance.now(),requestAnimationFrame(i)}}}({update(t){s.update(t)},C(){s.C()}}).start()})()}();
(function(){function ra(a){const b=document.createElementNS("http://www.w3.org/2000/svg","svg"),c=document.createElementNS("http://www.w3.org/2000/svg","path");b.appendChild(c);c.setAttribute("d",a);c.setAttribute("fill","none");c.setAttribute("stroke","black");c.setAttribute("stroke-width","2");c.setAttribute("id","path");return c}function sa(a){let {x:b=0,y:c=0,width:d,height:e}=a;b-=.5*d;c-=.5*e;0>d&&(b+=d,d*=-1);0>e&&(c+=e,e*=-1);return{x:b,y:c,width:d,height:e}}function p(a,b,...c){return setTimeout(a,
b,...c)}function K(a=0,b=1){return Math.random()*(b-a)+a}function Ea({update:a,o:b}){function c(){requestAnimationFrame(c);q=performance.now();k=q-g;g=q;if(!(1E3<k)){for(d+=k;d>=e;)a(m),d-=e;r.clearRect(0,0,r.canvas.width,r.canvas.height);b()}}let d=0,e=1E3/60,m=1/60,g,q,k;const r=window.U.context;return{start(){g=performance.now();requestAnimationFrame(c)}}}function z(a,b){W[a]=W[a]||[];W[a].push(b)}function Fa(a=[]){W=Object.keys(W).reduce((b,c)=>{a.includes(c)&&(b[c]=W[c]);return b},{})}function h(a,
...b){(W[a]||[]).map(c=>c(...b))}function ta(a,b){return(new URL(a,b)).href}function ua(){window.Ba||(window.Ba={Oa:ta,Ka:O,d:H})}function V(a,b,c){ua();if(H[a])return H[a];H[a]=b(...c)}function ha(a){ua();return new Promise((b,c)=>{let d,e;if(O[a])return b(O[a]);d=new Image;d.onload=()=>{e=ta(a,window.location.href);O[e]=O[a]=d;b(d)};d.onerror=()=>{c()};d.src=a})}function F(a){return new Ga(a)}function va(a){return new Ha(a)}function wa(a=()=>{},b){a.Ca&&b.preventDefault();a(b)}function Ia(a){let b=
ba[a.code],c=ia[b];ja[b]=!0;wa(c,a)}function Ja(a){let b=ba[a.code],c=ka[b];ja[b]=!1;wa(c,a)}function Ka(){let a;for(a=0;26>a;a++)ba["Key"+String.fromCharCode(a+65)]=String.fromCharCode(a+97);for(a=0;10>a;a++)ba["Digit"+a]=ba["Numpad"+a]=""+a;window.addEventListener("keydown",Ia);window.addEventListener("keyup",Ja)}function ca(a){return!![].concat(a).some(b=>ja[b])}function Z(a,b,{Ga:c="keydown",preventDefault:d=!0}={}){let e="keydown"==c?ia:ka;b.Ca=d;[].concat(a).map(m=>e[m]=b)}function xa(a,{Ga:b=
"keydown"}={}){let c="keydown"==b?ia:ka;[].concat(a).map(d=>delete c[d])}function Q(a){return new La(a)}function la(a=1){const b=Q({create:ma,s:241});b.La=function(c){this.u.forEach(d=>{d.dy*=c})};b.va=function(){this.u.forEach(c=>{c.dy/=2})};b.Pa=a;for(let c=0;240>c;c++){const d=K(1,3)*a,e=Math.floor(d/a*50)+50;b.get({x:Math.floor(K(0,256)),y:c,width:1,height:1,dy:d/4,color:`rgb(${e}, ${e}, ${e})`,update(){this.advance();240<this.y&&(this.y=0)}})}b.C=()=>!0;return b}function Ma(a){return new Na(a)}
function ya(a,b){let c=[],d=b.x+b.width/2;var e=b.y+b.height/2;b=a.y<e;e=a.y+a.height>=e;a.x<d&&(b&&c.push(0),e&&c.push(2));a.x+a.width>=d&&(b&&c.push(1),e&&c.push(3));return c}function Oa(a){return new za(a)}function Pa(a){return new Qa(a)}function na(a,b){a.C()&&b.forEach(c=>{var d;if(d="enemy"!==a.name||"enemy"!==c.name)if(d=c.C()&&!a.m&&!c.m){d=sa(c);let e=sa(a);d=d.x<e.x+e.width&&d.x+d.width>e.x&&d.y<e.y+e.height&&d.y+d.height>e.y}d&&("ship-bullet"!=a.name||c.m||(a.g=0,c.T(1)),"ship"!=a.name||
"asteroid"!=c.name&&"boss"!=c.name||(a.F(),a.g=0,c.T(5)),"ship"==a.name&&"enemy"==c.name&&(c.F(),c.g=0,a.T(50)),"ship"==a.name&&"enemy-bullet"==c.name&&(c.g=0,a.T(10)),"ship"!=a.name||"powerup"!=c.name||c.na||(c.F(),a.Ha(c)))})}function Ra(a){return new Sa(a)}function oa(a){a=pa[a];let b=Math.max(...Object.keys(a[0]),...Object.keys(a[1])),c=a[0][b];c??=a[1][b];return b+=c[1]/1E3*60*c[0]}function Ta(a=0,b=0,c=0,d=!1){const e=pa[b],m=oa(b);if(e[0][a]){const g=e[0][a];h("spawn-enemy",g[0],g[1],{l:g[2],
rotate:g[3],loop:g[4],h:g[5],Fa:g[6],W:g[7],path:ra(g[8])})}e[1][a]&&h("spawn-asteroid",...e[1][a]);e[2][a]&&h("spawn-powerup",...e[2][a]);e[3][a]&&h("set-dialog",...e[3][a]);0===e[4].length&&a>=m&&0===c&&h("next-level",b+1>=Aa?0:b+1);0<e[4].length&&d&&0===c&&h("spawn-boss",...e[4])}function Ua(){Z(["esc"],()=>{h("change-scene","menu")});Z(["p"],()=>{h("pause")});Z(["m"],()=>{aa.ka?aa.stop():aa.start()});xa(["enter"]);Z(["enter"],()=>c.Ja());aa.set("song1");aa.start();const a=new Va({x:120,y:248}),
b=la(20),c=new Wa(void 0);let d=0,e=0,m=3<e?Math.floor(.5*e):0,g=0,q=!0,k=!1,r=oa(d);const A=Q({create:va,s:400}),I=Q({create:ma,s:40}),B=Q({create:ma,s:400}),t=Q({create:Ma,s:10}),C=Q({create:Oa,s:50}),G=Q({create:Pa,s:4}),w=Q({create:Ra,s:4}),R=F({text:"SCORE 00000",x:8,y:8}),L=F({x:224,y:8,text:"@@@",color:"red"}),P=F({x:128,y:120,text:"LEVEL 1",align:"center",color:"lightgreen"}),D=new M({x:192,y:8,width:24,height:8,anchor:{x:0,y:0},j(){const f=this.context,l=0<=a.h?a.h/5:0;f.strokeStyle="white";
f.lineWidth=2;f.strokeRect(0,0,this.width,this.height);f.fillStyle="green";25>a.h&&(f.fillStyle="red");f.fillRect(2,2,l,this.height-4)}}),S=new M({x:0,y:0,active:!1,O:256,update(){},j(){const f=this.context;f.save();f.beginPath();f.arc(a.x,a.y,this.O,0,2*Math.PI,!0);f.clip()},start(){this.O=256;this.active=!0},end(){this.active=!1},update(){this.active&&60<this.O&&--this.O;!this.active&&256>this.O&&(this.O+=1);this.advance()},o(){this.j()}}),X=new M({x:0,y:0,update(){},j(){this.context.restore()},
o(){this.j()}});z("hit",()=>{T(H.hit)});z("explosion",(f,l,n,u,v)=>{T(H.explosion);for(let x=0;x<n;x++)0==x%2&&A.get({x:f,y:l,dx:K(-1,1)/2,dy:K(-1,1)/2,color:null,g:30}),A.get({x:f,y:l,dx:K(-u/2,u/2),dy:K(-u/2,u/2),color:v,g:30*u})});z("ship-fire",(f,l,n)=>{T(H.shoot);I.get({name:"ship-bullet",x:f,y:l,width:2,height:4,dy:-4,dx:n,color:null,l:17,g:100,update(){this.advance();0>this.y&&(this.g=0)}})});z("ship-die",()=>{h("spawn-powerup","fire",128,.6)});z("enemy-fire",(f,l)=>{T(H.shoot);const n=a.x-
4-f,u=a.y-4-l,v=Math.hypot(n,u)/1;B.get({name:"enemy-bullet",x:f+4,y:l+4,dx:n/v,dy:u/v,width:2,height:2,color:"red",g:300})});z("boss-fire",(f,l)=>{T(H.shoot2);for(let n=0;12>n;n++)B.get({name:"enemy-bullet",x:f,y:l,dx:1*Math.cos(30*n*Math.PI/180),dy:1*Math.sin(30*n*Math.PI/180),width:2,height:2,color:"red",g:400})});z("score",f=>{a.J+=Math.floor(f+2*m)});z("spawn-boss",(f,l,n,u,v,x,J,Ba,da,Xa)=>{k=!1;f=G.get({l:f,h:l,W:n,rotate:!1,loop:!0,m:!0,Z:"pink",ua:da,ta:v,path:ra(u)});h("spawn-enemy",x,0,
{l:J,h:2,W:Xa,Fa:Ba,parent:f,path:null})});z("spawn-enemy",(f,l,n)=>{f+=m;for(let u=0;u<f;u++){const v=Math.min(Math.max(1,n.l/4),2);p(x=>{C.get({...n,speed:v,sa:x*Math.PI/180,h:n.h+m})},u*l,360/f*u)}});z("spawn-asteroid",(f,l,n,u,v)=>{13===f&&(S.start(),p(()=>S.end(),15E3));let x=0;for(let J=0;J<f;J++)x>n.length-1&&(x=0),p((Ba,da)=>{t.get({x:n[da],y:-8,dx:u[da],dy:v[da],h:10+m})},J*l,J,x),x++});z("spawn-powerup",(f,l,n)=>{w.get({type:f,x:l,y:-8,dy:n})});z("set-dialog",(f,l)=>{c.start({D:l,ca:f})});
z("next-level",f=>{k=!1;d=f;e++;g=0;q=!1;r=oa(f);m=3<e?Math.floor(.25*e):0;h("score",100)});z("boss-die",()=>{h("score",200);d++;d>=Aa&&(d=0);h("next-level",d)});z("game-over",()=>{const f=localStorage.getItem("hiScore")||0;a.J>f&&localStorage.setItem("hiScore",a.J);h("change-scene","game-over",{J:a.J,Ia:f})});const N=new ea(void 0),E=new ea(void 0),U=new ea(void 0);return new qa({children:[S,b,I,B,a,C,G,t,w,A,X,c,D,P,R,L],xa:!1,update(){this.paused=!1;if(c.ia&&c.ca)c.update(),this.paused=!0;else{40>
g&&(P.text=`LEVEL ${e+1}`,P.g=100);var f=C.size+t.size;g===r&&(k=!0);Ta(g,d,f,k);0>=a.ja&&!this.xa?(this.xa=!0,p(()=>h("game-over"),1E3)):(I.B().forEach(l=>{N.clear();N.add(l,t.B(),C.B(),G.B());na(l,N.get(l))}),E.clear(),E.add(a,t.B(),C.B(),B.B(),G.B(),w.B()),na(a,E.get(a)),U.clear(),U.add(t.B()),t.B().forEach(l=>{na(l,U.get(l))}),R.text=`SCORE ${a.J}`,L.text="@@@".slice(0,a.ja),q&&40<g&&140>g&&0===g%20&&b.va(),g++)}}})}function Ca(){Z(["enter"],()=>{h("change-scene","game")});xa(["esc"]);const a=
la(20),b=F({x:128,y:32,text:"MICRO SHOOTER",align:"center",color:"red",v:2,H:4}),c=F({x:128,y:88,text:"JS13K 2024 EDITION",align:"center",color:"yellow"}),d=F({x:128,y:128,text:"A GAME BY\nMARCO FERNANDES",lineHeight:16,color:"white",align:"center"}),e=F({x:128,y:176,text:"ARROWS OR WASD TO MOVE\nSPACE TO SHOOT",lineHeight:16,align:"center"}),m=F({x:128,y:224,text:"ENTER TO START",color:"lightgreen",align:"center"}),g=new qa({frame:0,children:[a,m],update(){40<this.frame&&140>this.frame&&0===this.frame%
20&&a.va();this.frame++}});p(()=>{g.add(b)},1E3);p(()=>{g.add(c)},2E3);p(()=>{g.add(d)},3E3);p(()=>{g.add(e)},4E3);return g}function Ya({J:a=0,Ia:b=localStorage.getItem("hiScore")||0}={}){Z(["enter"],()=>{h("change-scene","menu")});z("explosion",(A,I,B,t,C)=>{T(H.explosion);for(let G=0;G<B;G++)d.get({x:A,y:I,dx:K(-t/2,t/2),dy:K(-t/2,t/2),color:C,g:30*t})});const c=la(1),d=Q({create:va,s:400}),e=F({x:128,y:32,text:"GAME OVER",align:"center",color:"red",v:2,H:4}),m=F({x:128,y:80,text:"YOUR SCORE:",
color:"white",align:"center"}),g=F({x:128,y:96,text:`${a}`,color:"white",align:"center",v:2,H:2}),q=F({x:128,y:128,text:"NEW HIGH SCORE!",color:"yellow",align:"center"}),k=F({x:128,y:224,text:"ENTER TO CONTINUE",color:"lightgreen",align:"center"}),r=new qa({frame:0,children:[c,k,d]});p(()=>{r.add(e);h("explosion",128,48,100,6,"red")},1E3);p(()=>{r.add(m)},2E3);p(()=>{r.add(g)},2500);a>b&&p(()=>{r.add(q);h("explosion",128,132,60,4,"yellow")},3E3);return r}let W={},O={},H={};class M{constructor(a){this.i(a)}i(a=
{}){Object.assign(this,{name:"",x:0,y:0,width:8,height:8,rotation:0,v:1,H:1,anchor:{x:0,y:0},color:"white",dx:0,dy:0,V:0,S:0,g:Infinity,frame:0,l:0,context:window.U.context,A:[O["spritesheet.png"],8,8],h:20,X:!1,M:a.update,ha:a.o,ra:a.j,...a})}T(a){h("hit");this.h-=a;this.X=!0;0>=this.h&&this.F&&this.F();p(()=>this.X=!1,100)}advance(){this.x+=this.dx;this.y+=this.dy;this.dx+=this.V;this.dy+=this.S;this.g--;this.frame++}update(){this.M?this.M():this.advance()}o(){if(this.ha)return this.ha();const a=
this.context,b=this.x,c=this.y,d=this.anchor,e=this.rotation,m=this.v,g=this.H,q=this.width,k=this.height;a.save();a.translate(b,c);e&&a.rotate(e);m&&g&&a.scale(m,g);a.translate(-q*d.x,-k*d.y);this.j();a.restore()}j(){if(this.ra)return this.ra();const a=this.context,b=this.color,c=this.width,d=this.height;this.X&&(a.save(),a.translate(0,-1));this.color?(a.fillStyle=b,a.fillRect(0,0,c,d)):a.drawImage(this.A[0],this.l*this.A[1],0,c,d,0,0,c,d);this.X&&(a.globalCompositeOperation="source-atop",a.fillStyle=
"white",a.fillRect(0,0,c,d),a.globalCompositeOperation="source-over",a.restore())}C(){return 0<this.g}}const ma=a=>new M(a);class qa{constructor(a){this.i(a)}i(a={}){const b=Object.keys(a).reduce((c,d)=>{"function"!==typeof a[d]&&(c[d]=a[d]);return c},{});Object.assign(this,{id:"scene",context:window.U.context,M:a.update,ha:a.o,children:[],paused:!1,...b})}add(a){this.children.push(a)}pause(){this.paused=!0}resume(){this.paused=!1}update(a){this.paused||(this.children.forEach(b=>{if(!b.C)return b.update(a);
b.C()&&b.update(a)}),this.M&&this.M())}o(){this.context.save();this.M&&this.M();this.children.forEach(a=>{if(!a.C)return a.o();a.C()&&a.o()});this.context.restore()}}class Ga extends M{constructor(a={}){super({name:"text",x:0,y:0,text:"",color:"white",align:"left",lineHeight:8,scale:1,A:O["font.png"],...a})}j(){const a=this.text.split("\n"),b=this.context,c=this.align,d=this.lineHeight,e=this.color;b.save();a.forEach(m=>{b.save();"center"===c&&b.translate(8*-m.length/2,0);"right"===c&&b.translate(8*
-m.length,0);for(let q=0;q<m.length;q++){var g=m.charCodeAt(q);let k=0;65<=g&&90>=g?k=g-65:null;48<=g&&57>=g?k=g-22:null;32===g&&(k=-1);46===g&&(k=36);44===g&&(k=37);63===g&&(k=38);33===g&&(k=39);58===g&&(k=40);64===g&&(k=41);-1!==k&&(g=8*q,b.drawImage(this.A,8*k,0,8,8,g,0,8,8),b.globalCompositeOperation="source-atop",b.fillStyle=e||"white",b.fillRect(g,0,8,8),b.globalCompositeOperation="source-over")}b.restore();b.translate(0,d)});b.restore()}}class Ha extends M{constructor(a){super({name:"explosion-particle",
color:"white",anchor:{x:.5,y:.5},...a})}update(){!this.color&&30>this.g&&(this.v=this.H=this.g/30);this.color&&60>this.g&&(this.v=this.H=this.g/60);this.advance()}j(){!this.color&&this.context.drawImage(this.A[0],128,0,8,8,0,0,8,8);this.color&&(this.context.fillStyle=this.color,this.context.fillRect(0,0,1,1))}}let ia={},ka={},ja={},ba={Enter:"enter",Escape:"esc",Space:"space",ArrowLeft:"arrowleft",ArrowUp:"arrowup",ArrowRight:"arrowright",ArrowDown:"arrowdown"};const T=(...a)=>{let b=fa.createBufferSource(),
c=fa.createBuffer(a.length,a[0].length,44100);a.map((d,e)=>c.getChannelData(e).set(d));b.buffer=c;b.connect(fa.destination);b.start();return b},Y=(a=1,b=.05,c=220,d=0,e=0,m=.1,g=0,q=1,k=0,r=0,A=0,I=0,B=0,t=0,C=0,G=0,w=0,R=1,L=0,P=0)=>{let D=2*Math.PI,S=k*=500*D/194481E4,X=(0<C?1:-1)*D/4;b=c*=(1+2*b*Math.random()-b)*D/44100;let N=[],E=0,U=0,f=0,l=1,n=0,u=0,v=0,x,J;d=99+44100*d;L*=44100;e*=44100;m*=44100;w*=44100;r*=500*D/44100**3;C*=D/44100;A*=D/44100;I*=44100;B=44100*B|0;for(J=d+L+e+m+w|0;f<J;N[f++]=
v)++u%(100*G|0)||(v=g?1<g?2<g?3<g?Math.sin((E%D)**3):Math.max(Math.min(Math.tan(E),1),-1):1-(2*E/D%2+2)%2:1-4*Math.abs(Math.round(E/D)-E/D):Math.sin(E),v=(B?1-P+P*Math.sin(2*Math.PI*f/B):1)*(0<v?1:-1)*Math.abs(v)**q*a*.3*(f<d?f/d:f<d+L?1-(f-d)/L*(1-R):f<d+L+e?R:f<J-w?(J-f-w)/m*R:0),v=w?v/2+(w>f?0:(f<J-w?1:(J-f)/w)*N[f-w|0]/2):v),x=(c+=k+=r)*Math.sin(U*C-X),E+=x-x*t*(1-1E9*(Math.sin(f)+1)%2),U+=x-x*t*(1-1E9*(Math.sin(f)**2+1)%2),l&&++l>I&&(c+=A,b+=A,l=0),!B||++n%B||(c=b,k=S,l=l||1);return N},fa=new (window.AudioContext||
webkitAudioContext);class Va extends M{i(a){super.i({name:"ship",da:!0,y:248,m:!1,Ea:!1,h:100,ja:3,J:0,N:0,G:!1,anchor:{x:.5,y:.5},l:1,...a});this.za()}Ha(a){T(H.powerup);"shield"===a.type&&(this.h+=50,100<this.h&&(this.h=100));"fire"===a.type&&(this.N++,3<this.N&&(this.N=3))}$(){this.G||(this.G=!0,h("ship-fire",this.x-1,this.y-8,K(-.3,.3)),0<this.N&&h("ship-fire",this.x-1,this.y-8,K(-.5,.5)),1<this.N&&p(()=>{h("ship-fire",this.x-1,this.y-8,K(-.3,.3));h("ship-fire",this.x-1,this.y-8,K(-.5,.5))},100),
2<this.N&&p(()=>{h("ship-fire",this.x-1,this.y-8,-2);h("ship-fire",this.x-1,this.y-8,2)},400),p(()=>{this.G=!1},200))}F(){h("ship-die");h("explosion",this.x,this.y-4,60,4,"white");this.Ea=!0;this.g=0;this.ja--;this.m=!0;this.V=this.dx=0;this.x=128;p(()=>{this.za()},1E3)}za(){this.da=this.m=!0;this.g=Infinity;this.y=248;this.frame=0;this.h=100;this.N=0;p(()=>{this.m=this.da=!1},1E3)}update(){this.S=this.V=0;this.dx*=.96;this.dy*=.96;this.l=1;ca(["d","arrowright"])&&5>this.dx&&(this.V=.2,this.l=2);
ca(["a","arrowleft"])&&-5<this.dx&&(this.V=-.2,this.l=0);this.da||(ca(["s","arrowdown"])&&5>this.dy&&(this.S=.2),ca(["w","arrowup"])&&-5<this.dy&&(this.S=-.2));!this.G&&ca("space")&&this.$();this.da&&(this.S=-.03,this.v=this.H=Math.min(Math.max(1,2-this.frame/60),2));0>=this.h&&this.F();this.advance();4>this.x&&(this.x=4,this.dx=0);252<this.x&&(this.x=252,this.dx=0);4>this.y&&(this.y=4,this.dy=0);236<this.y&&(this.y=236,this.dy=0)}j(){const a=this.context,b=this.width,c=this.height;a.drawImage(this.A[0],
this.A[1]*this.l,0,b,c,0,0,b,c);let d=1;0>this.S&&(d=5>this.frame%10?2:3);a.fillStyle="#FFaa33";a.fillRect(3,7,2,d);a.fillStyle="#FF6633";a.fillRect(5>this.frame%10?3:4,7+d,1,d);this.X&&(a.globalCompositeOperation="source-atop",a.fillStyle="white",a.fillRect(0,0,b,c),a.globalCompositeOperation="source-over")}}class La{constructor({create:a,s:b=1024}={}){let c;if(!(a&&(c=a({id:""}))&&c.update&&c.i&&c.C&&c.o))throw Error("Must provide create() function which returns an object with init(), update(), render(), and isAlive() functions");
this.qa=a;this.u=[a({id:""})];this.size=0;this.s=b}get(a={}){if(this.size==this.u.length){if(this.size==this.s)return;for(var b=0;b<this.size&&this.u.length<this.s;b++)this.u.push(this.qa())}b=this.u[this.size];this.size++;b.i(a);return b}B(){return this.u.slice(0,this.size)}clear(){this.size=this.u.length=0;this.u.push(this.qa())}update(a){let b,c=!1;for(let d=this.size;d--;)b=this.u[d],b.update(a),b.C()||(c=!0,this.size--);c&&this.u.sort((d,e)=>e.C()-d.C())}o(){for(let a=this.size;a--;)this.u[a].o()}}
class Na extends M{i(a){super.i({name:"asteroid",A:[O["spritesheet16.png"],16,16],l:2,width:16,height:16,color:null,anchor:{x:.5,y:.5},h:10,...a})}F(){h("explosion",this.x,this.y,50,4,"white");h("score",10);this.g=0}update(){this.rotation=this.frame/(10/this.dy);this.advance();0>this.x||264<this.x||248<this.y&&(this.g=0)}}class ea{constructor({aa:a=3,ba:b=25,I:c}={}){this.aa=a;this.ba=b;a=window.U.context.canvas;this.I=c||{x:0,y:0,width:a.width,height:a.height};this.Y=!1;this.ga=0;this.R=[];this.L=
[]}clear(){this.L.map(a=>{a.clear()});this.Y=!1;this.R.length=0}get(a){let b=new Set;for(;this.L.length&&this.Y;)return ya(a,this.I).map(c=>{this.L[c].get(a).map(d=>b.add(d))}),Array.from(b);return this.R.filter(c=>c!==a)}add(...a){a.flat().map(b=>{this.Y?this.pa(b):(this.R.push(b),this.R.length>this.ba&&this.ga<this.aa&&(this.Da(),this.R.map(c=>this.pa(c)),this.R.length=0))})}pa(a){ya(a,this.I).map(b=>{this.L[b].add(a)})}Da(){var a;this.Y=!0;if(!this.L.length){var b=this.I.width/2|0;var c=this.I.height/
2|0;for(a=0;4>a;a++)this.L[a]=new ea({I:{x:this.I.x+(1==a%2?b:0),y:this.I.y+(2<=a?c:0),width:b,height:c},aa:this.aa,ba:this.ba}),this.L[a].ga=this.ga+1}}}class za extends M{i(a){a={name:"enemy",l:3,color:null,anchor:{x:.5,y:.5},h:1,frame:0,loop:!0,wa:!0,Z:"white",W:200,speed:1,...a};super.i(a);this.path&&(this.g=Math.floor(a.path.getTotalLength()/this.speed));this.loop&&(this.g=Infinity)}$(){h("enemy-fire",this.x-4,this.y-4,this.rotation,3)}F(){h("explosion",this.x,this.y,30,3,this.Z);h("score",10);
this.g=0}update(){this.rotation=180*Math.PI/180;if(this.path){const a=this.path.getPointAtLength(this.frame*this.speed),b=this.path.getPointAtLength(this.frame*this.speed+1);this.x=Math.floor(a.x);this.y=Math.floor(a.y);this.rotate&&(this.rotation=90*Math.PI/180+Math.atan2(b.y-a.y,b.x-a.x))}else this.x=this.parent.x+Math.cos(this.frame/this.parent.ua+this.sa)*this.parent.ta,this.y=this.parent.y+Math.sin(this.frame/this.parent.ua+this.sa)*this.parent.ta;this.wa&&(this.v=this.H=Math.min(Math.max(0,
(this.frame*this.speed+1)/100),1));!this.loop&&100>this.g&&(this.v=this.H=Math.min(Math.max(0,this.g/100),1));1>this.v&&(this.m=!0);1<=this.v&&(this.m=!1);1==this.v&&0===this.frame%this.W&&this.$();this.path&&this.frame*this.speed>=this.path.getTotalLength()&&this.loop&&(this.frame=0,this.wa=!1);this.frame++;this.g--}}class Qa extends za{i(a){super.i({name:"boss",A:[O["spritesheet16.png"],16,16],l:0,width:16,height:16,color:null,h:10,Z:"white",W:200,G:!1,loop:!1,m:!0,la:!1,fa:[],...a});this.ya=this.h}T(a){super.T(a);
this.la=!0;p(()=>{this.la=!1},1E3)}$(){this.G=!0;this.m=!1;this.fa[0]=p(()=>{h("boss-fire",this.x,this.y,this.rotation,3)},400);this.fa[1]=p(()=>{h("boss-fire",this.x,this.y,this.rotation,3)},800);this.fa[2]=p(()=>{h("boss-fire",this.x,this.y,this.rotation,3)},1200);p(()=>{this.G=!1;this.m=!0},1600)}F(){h("explosion",this.x,this.y,30,3,this.Z);h("score",10);this.g=0;this.fa.map(a=>clearTimeout(a));h("boss-die")}update(){!this.G&&super.update();!this.G&&(this.m=!0)}j(){super.j();if(this.la){var a=
this.context,b=20*this.h/this.ya;a.save();a.translate(this.width/2,this.height/2);a.rotate(-this.rotation);a.fillStyle="white";a.fillRect(-12,-16,24,6);a.fillStyle="black";a.fillRect(-11,-15,22,4);a.fillStyle="green";this.h<this.ya/4&&(a.fillStyle="red");a.fillRect(-10,-14,b,2);a.restore()}}}class Wa extends M{i(a){a={name:"dialog",x:-16,y:200,Aa:[10,11,12,13,14],text:F({text:"",x:16,y:8,align:"left"}),K:0,D:[],P:0,ea:0,frame:0,anchor:{x:0,y:0},oa:!1,ia:!1,ma:!1,ca:!0,...a};super.i(a)}Ja(){0==this.D.length||
this.P>this.D.length||(this.K=this.D[this.P].length)}start(a){this.ma=!1;setTimeout(()=>{this.ia=!0;this.D=["",...a.D];this.frame=0;this.ca=a.ca},1E3);this.dx=2}stop(){this.ma=!0;this.text.text="        ";this.ia=!1;setTimeout(()=>{this.D=[];this.frame=this.K=this.P=0},1E3);this.dx=-2}update(){8<this.x&&(this.dx=0,this.x=8);-16>this.y&&(this.dx=0,this.x=-16);if(0!=this.D.length){this.oa=!1;var a=this.D[this.P]+"      ";" "!==a[this.K]&&(this.oa=!0);0==this.frame%5&&(this.K++," "!==a[this.K]&&T(H.typing));
this.P<this.D.length&&(this.text.text=a.slice(0,this.K));this.frame++;this.K>=a.length&&(this.P++,this.K=this.frame=0);this.P>=this.D.length&&!this.ma&&this.stop();this.oa&&0==this.frame%5&&this.ea++;this.ea>=this.Aa.length&&(this.ea=0);super.update()}}j(){const a=this.context,b=this.A;a.fillStyle="white";a.fillRect(-2,-2,12,12);a.drawImage(b[0],8*this.Aa[this.ea],0,8,8,0,0,8,8);a.translate(16,0);this.text.j()}}class Sa extends M{i(a){super.i({name:"powerup",type:"fire",width:16,height:16,na:!1,anchor:{x:.5,
y:.5},A:[O["font.png"],8,8],...a})}F(){this.na=!0;this.g=10;this.frame=0}update(){248<this.y&&(this.g=0);super.update()}j(){const a=this.context,b=this.type,c=this.na,d=this.frame;let e,m;"shield"===b&&(e="yellow",m=18);"fire"===b&&(e="lightblue",m=15);a.strokeStyle=e;a.lineWidth=2;10>d%20&&!c&&a.strokeRect(0,0,16,16);a.fillStyle=e;a.fillRect(3,3,10,10);a.drawImage(this.A[0],8*m,0,8,8,4,4,8,8);c&&(a.globalAlpha=1-this.frame/10,a.strokeRect(-this.frame,-this.frame,16+2*this.frame,16+2*this.frame),
a.globalAlpha=1)}}var y={Na:"M127 120V43c0-77 99 8 99 77 0 70-35 102-99 102S22 181 22 120s32-84 84-84 85 32 85 84c0 53-28 62-64 62-35 0-68-18-68-62 0-43 25-47 47-47 21 0 48 24 48 47 0 24-7 28-27 28s0-14 0-28Z",Ra:"M287 13-21 61l293 46-293 31 293 48-290 52",Sa:"m-21 13 308 48-293 46 293 31-293 48 291 52",Ta:"m20 7 50 48-48 46 48 31-48 48 48 52",Ua:"m237 7-50 48 48 46-48 31 48 48-48 52",Ma:"M121 123S-30 40 24 24C78 6 168 7 233 24 298 40-40 214 24 227c63 12 159 12 209 0 51-12-112-104-112-104Z",w:"M223-33v238c0 42-61 41-61 0V41c0-44-64-44-64 0v164c0 43-71 33-71 0V-27",
Qa:"M27-33v238c0 42 61 41 61 0V41c0-44 64-44 64 0v164c0 43 71 33 71 0V-27"};const pa=[[{500:[3,400,4,!0,!0,1,0,200,y.sandClock],1E3:[3,400,5,!0,!0,2,0,200,y.sandClock]},{},{1500:["fire",128,.6]},{100:[!1,["CAPTAIN","    ","WE DETECTED SOME ENEMY SCOUTS","BETTER DESTROY THEM"]],1E3:[!1,["TOO LATE!","THEY ARE COMING","WITH A FULL FLEET","    ","GOOD LUCK!"]]},[]],[{1E3:[3,1E3,3,!0,!1,1,0,200,y.zigzag],2E3:[5,1500,6,!1,!1,1,0,130,y.zigzagLeft]},{},{2500:["fire",128,.6],550:["shield",140,.3]},{100:[!1,
["TOO LATE!","THEY ARE COMING","WITH A FULL FLEET","    ","GOOD LUCK!"]]},[0,10,50,"M127 120V43c0-77 99 8 99 77 0 70-35 102-99 102S22 181 22 120s32-84 84-84 85 32 85 84c0 53-28 62-64 62-35 0-68-18-68-62 0-43 25-47 47-47 21 0 48 24 48 47 0 24-7 28-27 28s0-14 0-28Z",30,8,9,1,20,150]],[{},{1E3:[13,1E3,[20,200,120,180,60,220,180,40,120,60],[0,-.1,0,-.1,.1,-.1,0,.1,0,.1],[1,.5,.7,.5,.9,.5,1,.8,.4,.7]]},{1500:["fire",128,.6],2500:["shield",140,.3],3500:["fire",128,.6]},{100:[!1,"13 ASTEROIDS DETECTED;      ;OOOPSS...;HOPE THIS DOES NOT TRIGGER;YOUR TRISKAIDEKAPHOBIA...;         ".split(";")]},
[0,10,100,"M127 120V43c0-77 99 8 99 77 0 70-35 102-99 102S22 181 22 120s32-84 84-84 85 32 85 84c0 53-28 62-64 62-35 0-68-18-68-62 0-43 25-47 47-47 21 0 48 24 48 47 0 24-7 28-27 28s0-14 0-28Z",40,4,9,1,60,50]],[{800:[5,400,9,!0,!1,4,0,400,y.zigzag],810:[5,400,9,!0,!1,4,0,400,y.zigzagLeft],2E3:[5,400,7,!0,!1,4,0,400,y.w],2010:[5,400,7,!0,!1,4,0,400,y.wReversed]},{},{1500:["fire",128,.6]},{100:[!1,["THAT CONDITION STILL","AFFECTING YOUR","VISION, HUH!?","         "]]},[0,10,250,y.sandClock,30,8,8,0,
10,50]],[{2500:[13,200,5,!0,!0,1,0,50,y.spiral]},{1E3:[13,1E3,[20,200,120,180,60,220,180,40,120,60],[0,-.1,0,-.1,.1,-.1,0,.1,0,.1],[1,.5,.7,.5,.9,.5,1,.8,.4,.7]]},{1500:["fire",128,.6]},{100:[!1,"HERE COME MORE ASTEROIDS;12 PLUS 1, HEHE!;         ;ALSO 13 SHIPS;        ;OH MAN! NOT AGAIN!".split(";")]},[]],[{500:[10,400,3,!1,!1,2,0,200,y.zzLeft],800:[10,400,4,!1,!1,2,0,200,y.zzRight],1500:[10,400,3,!1,!1,2,0,200,y.zzLeft],1800:[10,400,4,!1,!1,2,0,200,y.zzRight],2500:[5,1E3,6,!1,!1,1,0,40,y.spiral]},
{},{1500:["fire",128,.6]},{100:[!1,["HMMM... ZIGZAGERS?","    "]]},[]]],Aa=pa.length,aa={node:null,ka:!1,buffer:null,async set(a){const b=!!this.node;b&&await this.stop();this.buffer=H[a];b&&await this.start()},async start(){this.node||(this.node=T(...this.buffer),this.node.loop=!0,await fa.resume(),this.ka=!0)},async stop(){this.node&&(this.node.stop(),this.node.disconnect(),this.node=null,this.ka=!1)}};var Da=zzfxM=(a,b,c,d=125)=>{let e,m,g,q,k,r,A,I,B,t,C,G,w,R,L=0,P=[],D=[],S=[],X=0,N=0,E=1,U=
{},f=44100/d*60>>2;for(;E;X++)P=[E=I=G=0],c.map((l,n)=>{A=b[l][X]||[0,0,0];E|=!!b[l][X];R=G+(b[l][0].length-2-!I)*f;w=n==c.length-1;m=2;for(q=G;m<A.length+w;I=++m){k=A[m];B=m==A.length+w-1&&w||t!=(A[0]||0)|k|0;for(g=0;g<f&&I;g++>f-99&&B?C+=(1>C)/99:0)r=(1-C)*P[L++]/2||0,D[q]=(D[q]||0)-r*N+r,S[q]=(S[q++]||0)+r*N+r;k&&(C=k%1,N=A[1]||0,(k|=0)&&(P=U[[t=A[L=0]||0,k]]=U[[t,k]]||(e=[...a[t]],e[2]*=2**((k-12)/12),0<k?Y(...e):[])))}G=R});return[D,S]},Za=[[[,0,77,,,.7,2,.41,,,,,,,,.06],[,0,43,.01,,.3,2,,,,
,,,,,.02,.01],[,0,170,.003,,.008,,.97,-35,53,,,,,,.1],[.8,0,270,,,.12,3,1.65,-2,,,,,4.5,,.02],[,0,86,,,,,.7,,,,.5,,6.7,1,.05],[,0,41,,.05,.4,2,0,,,9,.01,,,,.08,.02],[,0,2200,,,.04,3,2,,,800,.02,,4.8,,.01,.1],[.3,0,16,,,.3,3]],[[[1,-1,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33],[3,1,22,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,24,,,,,,,,,,,,,,,,,,,,,,,,22,,22,
,22,,,,],[5,-1,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,23,,,,,,,,,,,,,,,,,,,,,,,,24,,23,,21,,,,],[,1,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,23,,,,,,,,,,,,,,,,,,,,,,,,24,,23,,21,,,,]],[[1,-1,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33],[3,1,24,,,,,,,,27,,,,,,,,,,,,,,,,27,,,,24,,,,24,,,,,,,,27,,,,,,,,,,,,,,,,24,,24,,24,,,,],[5,-1,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,
24,,,,23,,,,,,,,,,,,,,,,,,,,,,,,24,,23,,21,,,,],[,1,21,,,,,,,,,,,,,,,,,,,,,,,,,,,,24,,,,23,,,,,,,,,,,,,,,,,,,,,,,,24,,23,,21,,,,],[6,1,,,34,34,34,,,,,,34,34,,,,,34,,,,34,34,,,,,34,,,,34,,,,34,34,34,,,,,,34,,,,,,34,34,,,34,34,,,,,,,,,34,34],[4,1,,,,,,,24,,,,,,24,,24,,,,24,,,,24,,,,,,,,,,,,,,,,24,,,,,,24,,24,,,,24,,,,24,,,,,,,,,,]],[[1,-1,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,23,23,35,23,23,36,23,23,35,23,23,36,23,23,35,35,23,23,35,23,23,35,
23,23,36,23,23,35,23,23,36,36],[5,-1,21,,,19,,,21,,,,,,,,,,21,,,19,,,17,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[3,1,24,,,24,,,24,,,,,,,,,,24,,,24,,,24,,,,24.75,24.5,24.26,24.01,24.01,24.01,,,,,25,,,,,,,,25,,,,,,,,25,,,,,,,,25,25,25,25],[4,-1,,,,,,,,,,,,,,,,,,,,,,,,,,,24.75,24.5,24.26,24.01,24.01,24.01,24.01,24,,24,24,,24,24,24,24,,24,24,,24,,24,24,,24,24,,24,24,24,24,,24,24,,24,24],[7,-1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,23,,21,23,,35,,23,,21,23,,35,,35,,23,,21,23,,35,,21,23,,35,,21,23,,,],[6,1,
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,34,36,34,,33,34,34,36,31,36,34,,31,34,32,,33,36,34,,31,34,34,36,33,36,33,,31,,,]],[[1,-1,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,21,21,33,21,21,33,21,21,33,21,21,33,21,21,33,33,17,17,29,17,17,29,17,17,29,17,17,29,17,17,29,29,17,17,29,17,17,29,17,17,29,17,17,29,17,17,29,29],[4,1,24,24,,24,24,,24,24,24,24,,24,24,,24,,24,24,,24,24,,24,24,24,24,,24,24,,24,24,24,24,,24,24,,24,24,24,,,24,24,,24,,24,24,,24,24,,24,24,24,24,,24,24,,24,24],[7,-1,21,,19,21,,33,,21,,19,
21,,33,,33,,21,,19,21,,33,,21,,19,21,,33,,33,,17,,17,17,29,17,17,29,17,,17,17,29,17,17,29,17,,17,17,29,17,17,29,17,,17,17,29,17,17,29],[2,1,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,,,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,34,34,,34,,,],[6,1,,,36,,,,,,36,,36,,,,,,,,36,,,,,,36,,36,,,,,,,,36,,,,,,,,,,,,,,,,36,,,,,,36,,36,,,,,,],[3,1,,,,,25,,,,,,,,25,,,,,,,,25,,,,,,,,25,25,25,25,,,,,25,,,,,25,,,25,,,,,,,,25,,,,,,,,25,25,25,25]],[[1,-1,14,14,26,
14,14,26,14,14,26,14,14,26,14,14,26,26,14,14,26,14,14,26,14,14,26,14,14,26,14,14,26,26,17,17,29,17,17,29,17,17,29,17,17,29,17,17,29,29,19,19,31,19,19,31,19,19,31,19,19,31,19,19,31,31],[4,1,24,24,,24,24,,24,24,24,24,,24,24,,24,,24,24,,24,24,,24,24,24,24,,24,24,,24,24,24,24,,24,24,,24,24,24,24,,24,24,,36,,24,24,,24,24,,24,24,24,24,,24,24,,24,24],[7,-1,14,,14,14,26,14,14,26,14,,14,14,26,14,14,26,14,,14,14,26,14,14,26,14,,14,14,26,14,14,26,17,,17,17,29,17,17,29,17,,17,17,29,17,17,29,19,,19,19,31,19,19,
31,19,,19,19,31,19,19,31],[2,1,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,,,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,36,36,,36,,,],[3,1,,,,,25,,,,,,,,25,,,,,,,,25,,,,,,,,25,25,25,25,,,,,25,,,,,,,,25,,,,,,,,25,,,,,,,,25,25,25,25],[6,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,34,,,,,,34,,34,,,,,,,,34,,,,,,34,,34,,,,,,]]],[0,1,1,2,3,4,4]],$a=[[[.4,0,1E4,,,,,,,,,,.01,6.8,-.2],[1.4,0,84,,,,,.7,,,,.5,,6.7,1,.01],[,0,60,,.1,,2],[2,0,360,,,.12,2,2,,,,,,9,,.1],
[.75,0,586,,,.25,6],[2,0,360,,,.375,2,3.5],[1.2,0,490,,.25,.45,,,,,,,.2,,,,,,,.1],[.75,0,386,,,.25,6]],[[[,-1,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,],[2,-1,,20,8,8,20,8,,8,,20,,8,20,8,,20,,20,8,8,20,8,,8,,20,,8,20,8,,8,,20,8,8,20,8,,8,,20,,8,20,8,,8,,20,8,8,20,8,,8,,20,,8,20,8,,20],[,1,32,22,22,32,32,22,32,27,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,27,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,27,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,
22,32,32,22,32,32],[1,-1,20,,,20,,,20,,20,,,20,,,20,20.5,20,,,20,,,20,,20,,,20,,,20,20.5,20,,,20,,,20,,20,,,20,,,20,20.5,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[4,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,24.75,20.75,,,,,,,24.75,20.75,,,,21.75,20.75,,24.75,20.75,,,,,,,24.75,20.75,,,,21.75,20.75]],[[,-1,8,,,,,,8,,8,,,,,,8,,6,,,,,,6,,6,,,,,,6,,13,,,,,,13,,13,,,,,,13,,8,,,,,,8,,8,,,,,,8,,],[2,-1,,20,8,8,20,8,,8,,20,,8,20,8,,
20,,18,6,6,18,6,,18,,18,,6,18,6,,6,,25,13,13,25,13,,13,,25,13.75,13,25,13,,25,,20,8,8,20,8,,8,,20,,8,20,8,,20],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,
32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[5,1,20,20,15,,18,,13,15,,11,,6,8,,18,20,11,11,13,,10,,13,18,23,23,22,,18,,13,,11,11,13,,25,,11,13,25,25,11,,13,,6,,8,,,,,,,,,,,,,,,,]],[[,-1,6,,,,,,6,,6,,,,,,6,,11,,,,,,11,,11,,,,,,11,,13,,,,,,13,,13,,,,,,13,,8,,,,,,8,,8,,,,,,8,,],[2,-1,,18,6,6,18,6,,6,,18,,6,18,6,,6,,23,11,11,23,11,,23,,23,,11,23,11,,11,,25,13,13,25,13,,13,,25,13.75,13,25,13,,25,,20,8,8,20,8,,8,,20,,8,20,8,,20],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,
22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[5,1,18,18,13,,11,,10,11,,11,,13,10,,11,13,23,23,22,,18,,13,,11,10,,18,11,,11,18,11,11,13,,25,,18,23,25,23,18,,23,23,18,,20,,20,18,11,,6,8,,,,,,,,,]],[[,-1,
8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,],[2,-1,,20,8,8,20,8,,8,,20,,8,20,8,,20,,20,8,8,20,8,,8,,20,,8,20,8,,8],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.5,20,,,20,,,20,,20,,,20,,,20,20.5],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,]],[[,-1,11,,,,,,11,,11,,,,,,11,,11,,,,,,11,,11,,,,,,11,,16,,,,,,16,,16,,,,,,16,,16,,,,,,16,,16,,,,,,16,,],[2,-1,,23,11,11,23,11,,11,,23,,11,23,11,,23,,23,11,11,23,11,
,11,,23,,11,23,11,,11,,28,16,16,28,16,,16,,28,,16,28,16,,16,,28,16,16,28,16,,16,,28,,16,28,16,,16],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,
,,,,,,,32,,,,,,,,32,,,,],[6,1,15,,,,,,,,,,,,,,,,18,,,,,,,,,,,,15,18,15,18,18,,,,20,,,,,,,,,,,,23,,,,,,,,,,,,20,23,20,23]],[[,-1,13,,,,,,13,,13,,,,,,13,,13,,,,,,13,,13,,,,,,13,,15,,,,,,15,,15,,,,,,15,,15,,,,,,15,,15,,,,,,15,,],[2,-1,,25,13,13,25,13,,25,,25,,13,25,13,,13,,25,13,13,25,13,,25,,25,,13,25,13,,25,,27,15,15,27,15,,27,,27,,15,27,15,,15,,27,15,15,27,15,,27,,27,,15,27,15,,15],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,
32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[6,1,25,,,,,,,,,,,,,,,,,,,,,,,,,,,,20,23,25,,27,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,]],[[2,-1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[,1,32,22,22,32,32,22,32,32,32,22,22,
32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[4,1,3,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,,,,,,,,,],[7,1,,,,,,,,,,,,,,,,,,,,,,,,,18,18,,18,13,13,10,10]],[[,-1,4,,,,,,4,,4,,,,,,4,,4,,,,,,4,,4,,,,,,4,,13,,,,,,13,,13,,,,,,13,,13,,,,,,13,,13,,,,,,13,,],[2,-1,,16,4,4,16,4,,16,,16,,4,16,4,,16,,16,4,4,16,4,,4,,16,,4,16,4,,4,,25,13,13,25,13,,13,,25,,13,25,
13,,13,,25,13,13,25,13,,25,,25,,13,25,13,,13],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[6,1,4,,,,,,11,,,,,,16,,,,21,
,,,,,20,,,,,,20,,,,11,,,,,,13,,,,,,13,,,,11,,,,,,13,,,13,,,11,11,13,13]],[[,-1,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,6,,,,,,6,,6,,,,,,6,,6,,,,,,6,,6,,,,,,6,,],[2,-1,,20,8,8,20,8,,8,,20,,8,20,8,,20,,20,8,8,20,8,,8,,20,,8,20,8,,8,,18,6,6,18,6,,18,,18,,6,18,6,,18,,18,6,6,18,6,,18,,18,,6,18,6,,18],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,
,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[6,1,8,,,,,,18,,,,,,,,,,11,,,,,,22,,,,,,,,,,,,,,18,,,,,,,,,,,,18,18,18,18,18,18,18,18,20,20,20,20,18,18,18,18]],[[,-1,4,,,,,,4,,4,,,,,,4,,4,,,,,,4,,4,,,,,,4,,13,,,,,,13,,13,,,,,,13,,13,,,,,,13,,13,,,,,,13,,],[2,-1,,16,4,4,16,4,,16,,16,,4,16,4,,16,,16,4,4,16,4,,4,,16,,4,16,4,,4,,
25,13,13,25,13,,13,,25,,13,25,13,,13,,25,13,13,25,13,,25,,25,,13,25,13,,13],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,
,],[6,1,4.25,,,,16,,16,,,,,,,,16,,,,18,,15,,,,13,,11,,,,,,1,,,,16,,16,,,,,,,,21,,,,23,,20,,,,18,,16,,11,,9,,]],[[,-1,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,6,,,,,,6,,6,,,,,,6,,6,,,,,,6,,6,,,,,,6,,],[2,-1,,20,8,8,20,8,,8,,20,,8,20,8,,20,,20,8,8,20,8,,8,,20,,8,20,8,,8,,18,6,6,18,6,,18,,18,,6,18,6,,18,,18,6,6,18,6,,18,,18,,6,18,6,,18],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,
32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[6,1,11,,,,,,9,,,,,,8,,,,16,,,,,,15,,,,,,15,,,,6,,,,,,13,,,,,,18,,,,23,22.5,22.5,22.37,22.37,22.5,22.5,22.37,22.37,22.5,22.5,22.37,22.37,22.5,22.5,22.37]],[[,-1,4,,,,,,4,,4,,,,,,4,,4,,,,,,4,,4,,,,,,4,,13,,,,,,13,,13,,,,,,13,,13,,,,,,13,,13,
,,,,,13,,],[2,-1,,16,4,4,16,4,,16,,16,,4,16,4,,16,,16,4,4,16,4,,4,,16,,4,16,4,,4,,25,13,13,25,13,,13,,25,,13,25,13,,13,,25,13,13,25,13,,25,,25,,13,25,13,,13],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,
-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[6,1,4,,,,,,,,,,,,,,,,,16,16,16,15,16,16,16,15,16,16,16,4,,6,,8,,,,,,,,,,,,,,,,,20,20,20,19,20,20,20,19,20,20,20,8,,9,,]],[[,-1,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,6,,,,,,6,,6,,,,,,6,,6,,,,,,6,,6,,,,,,6,,],[2,-1,,20,8,8,20,8,,8,,20,,8,20,8,,20,,20,8,8,20,8,,8,,20,,8,20,8,,8,,18,6,6,18,6,,18,,18,,6,18,6,,18,,18,6,6,18,6,,18,,18,,6,18,6,,18],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,
32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[6,1,20,,,,,,21,,,,,,20,,,,16,,,,15,,11,,,,8,,,,,,6,,,,,,13,,,,,,18,,,,30,,,,,,25,,23,,22,,18,,13,,]],[[,-1,4,,,,,,4,,4,,,,,,4,,4,,,,,,4,,4,,,,
,,4,,13,,,,,,13,,13,,,,,,13,,13,,,,,,13,,13,,,,,,13,,],[2,-1,,16,4,4,16,4,,16,,16,,4,16,4,,16,,16,4,4,16,4,,4,,16,,4,16,4,,4,,25,13,13,25,13,,13,,25,,13,25,13,,13,,25,13,13,25,13,,25,,25,,13,25,13,,13],[,1,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,
20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[6,1,4.25,,3,,4,,11,,16,,,,23,,20,,8,,8.25,,20,,,,21,,,,23,,,,,,,,23,,,,21,,,,20,,8,8,8,1,3,,4,,8,,13,,16,,20,,21,,]],[[,-1,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,8,,,,,,8,,6,,,,,,6,,6,,,,,,6,,6,,,,,,6,,6,,,,,,6,,],[2,-1,,20,8,8,20,8,,8,,20,,8,20,8,,20,,20,8,8,20,8,,8,,20,,8,20,8,,8,,18,6,6,18,6,,18,,18,,6,18,6,,18,,18,6,6,18,6,,18,,18,,6,18,6,,18],[,1,32,22,22,32,32,22,32,32,32,
22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32,32,22,22,32,32,22,32,22,32,22,22,32,32,22,32,32],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,],[6,1,11,,,,,,,,,,,,,,,,,23,23,23,22,23,21,,20,,15,,11,,8,,6,,,,,,8,,,,,,10,,,,11,,,,,,13,,,,,,16,,,,]],[[4,
-1,15,15,15,,15,,15,15,,15,,15,15,,15,15,15,15,15,,15,,15,15,27,15,,15,15,,15,15,15,15,15,,15,,15,15,15,15,15,,15,15,15,,15,,15,15,15,,15,15,,,,,,,,,],[1,-1,20,,,20,,,20,22.5,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25,20,,,20,,,20,,20,,,20,,,20,20.25],[,-1,,22,22,,,22,,,,22,22,,,22,,,,22,22,,,22,,22,,22,22,,,22,,,,22,22,,,22,,22,,22,22,,,22,,,,22,22,,,22,,22,,22,22,,,22,,,],[3,-1,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,,,,,,,,32,
,,,]]],[0,1,2,3,2,4,5,6,1,2,3,7,10,9,8,13,12,11,14,4,5,15,6]],ab=[,,45,.03,.21,.6,4,.9,2,-3,,,,.2,,.9,,.45,.26],bb=[.9,,413,,.05,.01,1,3.8,-3,-13.4,,,,,,,.11,.65,.07,,237],cb=[1.5,,261,.01,.02,.08,1,1.5,-.5,,,-.5,,,,,.9,.05],db=[1.6,,291,.01,.21,.35,,2.2,,,-136,.09,.03,,,.2,.2,.7,.28],eb=[.3,,222,.02,.04,.09,3,.3,11,10,,,,,15,,,.53,.17],fb=[2.3,,330,,.06,.17,2,3.7,,,,,.05,.4,2,.5,.13,.89,.05,.17];y=function(a){window.U=window.U||{};return window.U.context=a}(document.getElementById("c").getContext("2d"));
y.imageSmoothingEnabled=!1;y.setTransform(1,0,0,1,0,0);(async()=>{Ka();await V("song1",Da,Za);await V("song2",Da,$a);await V("explosion",Y,ab);await V("shoot",Y,bb);await V("shoot2",Y,eb);await V("typing",Y,cb);await V("powerup",Y,db);await V("hit",Y,fb);await ha("font.png");await ha("spritesheet.png");await ha("spritesheet16.png");z("change-scene",(b,c)=>{Fa(["change-scene"]);aa.stop();switch(b){case "game":a=Ua();break;case "menu":a=Ca();break;case "game-over":console.log("game-over",c),a=Ya(c)}});
let a=Ca();Ea({update(b){a.update(b)},o(){a.o()}}).start()})()})();
